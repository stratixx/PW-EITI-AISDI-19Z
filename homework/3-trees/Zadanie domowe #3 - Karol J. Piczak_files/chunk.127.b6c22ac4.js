(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[127],{8229:(e,t,n)=>{"use strict";n(66992),n(33948);var r=n(80822),a=n(95993),l=n(49027),o=n(6970),i=n(27433),c=n(27813),s=n(85702),m=n(50990),u=n(6367),d=n(93093),b=n(90528),p=n(24925),y=n(52083),g=n(41413),E=n(67294),f=n(68501),h=n(4911),v=n(39855),S=n(14185),I=n(20779),w=n(70330);const D=g.StyleSheet.create({wrapperLogoField:{width:376},divider:{flex:"0 0 auto",alignSelf:"stretch",background:l.b.GREY_LIGHTER,height:1,marginBottom:r.b.S200}});function k(e){const{space:t,owner:n,onFile:r,error:a,loading:l}=e;return E.createElement(b.b,{styles:[D.wrapperLogoField]},E.createElement(b.b,{styles:[D.divider]}),E.createElement(h.t,{preview:()=>l?E.createElement(v.b.Frame,{size:"medium",styles:[p.b.COLOR.greyDark]},E.createElement(S.b,{size:"medium"})):E.createElement(f.b,{space:t,owner:n,size:"medium"}),onFile:r,styles:[b.b.MARGIN.S200]},a&&E.createElement(I.h,{error:a,styles:[b.b.MARGIN.S100Bottom]}),E.createElement(w.b.Hint,null,"Some tips: Use a graphical logo or image rather than text and upload an image that is 132px square or larger.")))}n.d(t,{z:()=>R});const C=g.StyleSheet.create({preview:{height:r.b.S600,width:r.b.S600,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:a.b.RADIUS_NORMAL,border:"1px solid "+l.b.GREY_LIGHT,marginRight:r.b.S100,background:"transparent"},previewWithEmoji:{paddingTop:4},previewFocused:{borderColor:l.b.BLUE_BASE},previewDark:{background:l.b.BLUE_DARKEST,border:"1px solid transparent"},wrapperEmojiPicker:{paddingTop:0},disabled:{color:l.b.GREY_LIGHT,pointerEvents:"none"}});function R(e){const{space:t,owner:n,onPick:r,onFile:a,onSwitchToEmojiTab:l,onSwitchToLogoTab:g,error:h,loading:v,isTabLocked:S,align:I="start"}=e,w=o.b.useTheme(),D=i.wr.useIsLoading(),[R,L]=E.useState(t.emoji?"emoji":"image"),x=e=>{S||(L(e),"emoji"===e?l():g())};return E.createElement(c.b.Toggeable,{closeOnClick:!1,anchor:e=>{let{ref:r,onToggle:a,opened:l}=e;return E.createElement(s.b,{ref:r,onPress:D?null:a},E.createElement(f.b,{space:t,emojiSize:m.xv.MEDIUM,size:"small",owner:n,styles:[C.preview,t.emoji&&C.previewWithEmoji,"dark"===w&&C.previewDark,l&&C.previewFocused]}))},wrapper:u.b.Container},E.createElement(o.b,{theme:"light"},E.createElement(u.b,{position:"south",align:I},E.createElement(d.e,{styles:[b.b.MARGIN.S100Left,b.b.MARGIN.S200Top,b.b.MARGIN.S200Bottom]},E.createElement(d.e.Item,{active:"emoji"===R,onPress:()=>x("emoji"),styles:S&&C.disabled},E.createElement(p.b.InfoH100,null,"Emoji")),E.createElement(d.e.Item,{active:"image"===R,onPress:()=>x("image")},E.createElement(p.b.InfoH100,null,"Image"))),"emoji"===R?E.createElement(y.Tm,{type:"icon",onPick:r,styles:[C.wrapperEmojiPicker]}):E.createElement(k,{space:t,owner:n,onFile:a,error:h,loading:v}))))}},94999:(e,t,n)=>{"use strict";n.d(t,{a:()=>l});n(88674);var r=n(33564),a=n(90451);function l(){const e=(0,r.X)(),t=(0,a.z)();return{exportUserArchive:async()=>{const{downloadURL:n}=await t.functions.execute("exportContent-exportUser",{},{timeout:3e5});window.open(n,"_blank"),await t.analytics.trackExportUser(e.uid)},exportSpaceArchive:async(e,n)=>{const{downloadURL:r}=await t.functions.execute("exportContent-exportSpace",{spaceID:n.uid},{timeout:3e5});window.open(r,"_blank"),await t.analytics.trackExportSpace(e,n)},exportOrgArchive:async e=>{const{downloadURL:n}=await t.functions.execute("exportContent-exportOrg",{orgID:e.uid},{timeout:3e5});window.open(n,"_blank"),await t.analytics.trackExportOrg(e)}}}},83543:(e,t,n)=>{"use strict";n.d(t,{y:()=>c});n(66992),n(2707),n(88674),n(4723),n(15306),n(23123),n(54747),n(33948);var r=n(69009),a=n.n(r);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(){return{checkTokenSanity:async(e,t)=>{const n=new d(e),[r,a]=t.split("/");try{const{permissions:e}=await n.getRepo({owner:r,repo:a});if(!e.admin)throw new Error("User no longer has the admin permissions for the repository "+t+".")}catch(l){throw new Error("The GitHub token has expired or the user has no longer access to the repository "+t+".")}},getUserRepos:async e=>{const t=new d(e),n=await t.listRepos(),r={};return{repos:n.map(e=>{const t={id:e.owner.id,avatarUrl:e.owner.avatar_url,login:e.owner.login,repos:0};return r[t.id]=r[t.id]||t,r[t.id].repos+=1,{id:e.id,name:e.name,isPrivate:e.private,canAdmin:e.permissions.admin,owner:t}}),orgs:Object.values(r).sort((e,t)=>t.repos>e.repos?1:-1)}},getRepoBranches:async(e,t,n)=>{const r=new d(e);return(await r.listRepoBranches({owner:t,repo:n})).map(e=>{let{name:t}=e;return t})}}}const s="https://api.github.com",m=3,u=[400,401,403,404,422];class d{constructor(e){this.token=e}async getRepo(e){let{owner:t,repo:n}=e;const{data:r}=await this.request("/repos/"+t+"/"+n);return r}async listRepos(){return this.paginate("/user/repos")}async listRepoBranches(e){let{owner:t,repo:n}=e;return this.paginate("/repos/"+t+"/"+n+"/branches")}async request(e,t,n){void 0===t&&(t={}),void 0===n&&(n=1);const r=await fetch(""+s+e,o({},t,{headers:o({"Content-Type":"application/json",Authorization:"token "+this.token},t.headers||{})}));if(r.status>=400&&!u.includes(r.status)){if(n>m)throw a()(r.status,r.statusText);return this.request(e,t,n+1)}return{data:await r.json(),response:r}}async paginate(e,t,n){void 0===t&&(t={}),void 0===n&&(n=[]);const r=await this.request(e,t),a=n.concat(r.data),l=this.getNextLink(r.response.headers.get("Link"));return l?this.paginate(l.replace(s,""),t,a):a}getNextLink(e){return((e||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1]||null}}},57155:(e,t,n)=>{"use strict";n.d(t,{f:()=>c});n(66992),n(88674),n(54747),n(33948);var r=n(39293),a=n(90451),l=n(33564),o=n(80419),i=n(87994);function c(){const{database:e,analytics:t,storage:n}=(0,a.z)(),c=(0,l.X)(),s=async(t,n)=>{await e.updateDocument(n.query(t.uid),{teams:n.teams.map(e=>e.serialize()).toJS()})};return{createTeam:async(n,r)=>{await e.commit(r.toCreateUpdate(n.uid)),t.trackCreateTeam(n)},updateTeamName:async(t,n)=>{await e.updateDocument(n.query(t.uid),{name:n.name})},deleteTeam:async(t,n)=>{await e.deleteDocument(n.query(t.uid))},updateOrgLogo:async(t,a)=>{const l=r.o.orgUpload({orgID:t.uid,filename:a.name}),o=await n.uploadFile(l,a,{user:c});await e.updateDocument(t.query(),{logoURL:o.downloadURL})},updateOrgName:async(t,n)=>{await e.updateDocument(t.query(),{name:n})},updateBaseDomain:async(t,n)=>{await e.commit(t.setBaseDomain(n).toBaseDomainUpdate())},deleteOrganization:async n=>{await e.commit(n.toDeleteUpdate()),t.trackDeleteOrg(n)},disableSAML:async(t,n)=>{await e.commit(n.toRemoveUpdate(t.uid))},updateSAMLIdP:async(n,r)=>{await e.commit(r.toUpdate(n.uid)),t.trackSetupSSO(n,r)},createOrg:async(a,l)=>{if(l)try{const e=r.o.orgUpload({orgID:a.uid,filename:l.name});n.uploadFile(e,l,{user:c})}catch(s){if("storage/object-not-found"!==s.code)throw s}await e.commit(a.toCreateUpdate());const i=await e.getCollection(o.b.queryByUser(c.uid));return await t.identifyOrg(a,i),t.trackCreateOrg(a),a},updateBillingConfig:async t=>{await e.setDocument(t.query(),t)},removeMember:async(n,r)=>{await e.commit(r.toDeleteUpdate(n.uid)),t.trackLeaveOrg({org:n,leaveSource:"admin"})},updateMemberRole:async(t,n,r)=>{const a=n.merge({role:r});await e.commit(a.toUpdate(t.uid))},transferOwnership:async(t,n)=>{await e.commit(t.toTransferOwnershipUpdate(n.uid))},updateMemberTeams:s,updateMembersTeams:async(e,n,r)=>{await Promise.all(n.map(t=>s(e,t)).toArray()),t.trackAddMembers(e,r)},revokeInvites:async(t,n,r)=>{const a=i.b.getNewInvitesUpdate(t.uid,r&&r.uid);n.forEach(e=>{a.delete(e.query(t.uid))}),await e.commit(a)}}}},34582:(e,t,n)=>{"use strict";function r(){return{openSupportDialog:function(){window.zE&&window.zE.activate?window.zE.activate({hideOnClose:!0}):window.open("mailto:support@gitbook.com")}}}n.d(t,{h:()=>r})},33230:(e,t,n)=>{"use strict";n.d(t,{y:()=>w});n(66992),n(88674),n(73210),n(54747),n(33948);var r=n(33564),a=n(90451),l=n(86409),o=n(28698),i=n(6190),c=n(39877),s=n(17720),m=n(448),u=n(4222),d=n(80822),b=n(16256),p=n(49027),y=n(90528),g=n(65252),E=n(41413),f=n(67294),h=n(17453);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const I=E.StyleSheet.create({commentInputContainer:{display:"flex",flexDirection:"column",padding:d.b.S200},commentInput:{display:"flex",flexDirection:"row"},commentInputAvatar:{paddingRight:d.b.S100},commentInputArea:{flex:1,alignSelf:"center"},commentInputTextarea:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({width:"100%",border:"none",boxShadow:"none",background:"none",resize:"none",paddingTop:d.b.S100},b.b.FONTS.TextH200,{"::placeholder":{fontWeight:400,color:p.b.GREY_BASE}}),commentInputNewDraftButton:{marginTop:d.b.S200},commentInputPostButton:{marginLeft:d.b.S100},commentInputCloseButton:{marginLeft:d.b.S100}}),w=f.forwardRef((function(e,t){const{placeholder:n="Leave a comment",postInNewDraft:d=!1,block:b=null,onClose:p,onPost:v}=e,S=(0,r.X)(),{createDraft:w}=(0,c.b)(),{analytics:D}=(0,a.z)(),k=(0,s.b)(),C=(0,m.b)(),R=(0,u.a)(),[L,x]=f.useState(""),T=L.trim().length>0,A=async()=>{if(T)if(d&&b){const e=await w();D.trackStartEditing({owner:k,space:C,draft:e,isNew:!0,from:"Comment"}),v(L,e.uid),R({toDraft:e.uid,toCommentAnchor:b.key})}else x(""),v(L)};return f.createElement(y.b,{styles:[I.commentInputContainer]},f.createElement(y.b,{styles:[I.commentInput,d&&y.b.PADDING.S200Right]},f.createElement(y.b,{styles:[I.commentInputAvatar]},f.createElement(l.b,{owner:S,size:"small"})),f.createElement(y.b,{styles:[I.commentInputArea]},f.createElement(h.b,{inputRef:e=>{t&&(t.current=e)},maxLength:299,placeholder:n,value:L,onChange:e=>{x(e.target.value)},onKeyDown:e=>{13!==e.keyCode||e.shiftKey||(e.preventDefault(),A())},className:(0,E.css)(I.commentInputTextarea)})),!d&&T&&f.createElement(g.b,{size:"small",rounded:!0,onClick:A,icon:f.createElement(o.b,null),styles:[I.commentInputPostButton]}),p&&f.createElement(g.b,{kind:"cancel",size:"small",icon:f.createElement(i.b,null),rounded:!0,styles:[I.commentInputCloseButton],onClick:p})),d&&f.createElement(g.b,{kind:"primary",size:"small",styles:[g.b.STYLES.block,I.commentInputNewDraftButton],onClick:A},"Comment in a new draft"))}))},56057:(e,t,n)=>{"use strict";n(66992),n(33948);var r=n(43099),a=n(86409),l=n(11022),o=n(80822),i=n(87609),c=n(49027),s=n(90528),m=n(24925),u=n(45903),d=n(41413),b=n(67294),p=(n(24603),n(39714),n(4723),n(23123),n(95993)),y=n(6970),g=n(17970);const E=d.StyleSheet.create({commentBody:{padding:o.b.S100,color:c.b.GREY_DARKEST,borderRadius:p.b.RADIUS_NORMAL,background:c.b.GREY_LIGHTEST,whiteSpace:"pre-line",transition:i.b.fasterEaseOut("background"),wordBreak:"break-word"},commentBodyHovered:{background:c.b.GREY_LIGHTER},commentBodyDark:{color:c.b.WHITE,background:c.b.GREY_BLUE_DARKER},commentBodyDarkHovered:{background:c.b.GREY_BLUE_DARK}}),f=new RegExp(/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([-.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/,"g"),h=new RegExp(/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,"g");function v(e){const{body:t,hovered:n=!1}=e,r=y.b.useTheme();if(!t)return null;const a=t.split(/\s/),l=a.map((e,t)=>{const n=e.match(f),r=e.match(h),l=t!==a.length?" ":"";return n?b.createElement(b.Fragment,null,b.createElement(g.d,{key:t,href:n.join(),target:"_blank",rel:"noopener noreferrer"},n),l):r?b.createElement(b.Fragment,null,b.createElement(g.d,{key:t,href:"mailto:"+r.join()},r),l):e+l});return b.createElement(s.b,{styles:[E.commentBody,"dark"===r&&E.commentBodyDark,n&&("dark"===r?E.commentBodyDarkHovered:E.commentBodyHovered)]},b.createElement(m.b.TextH200,null,l))}n.d(t,{n:()=>I});const S=d.StyleSheet.create({commentItem:{display:"flex",flexDirection:"row",padding:o.b.S200},commentItemClickable:{cursor:"pointer",transition:i.b.fasterEaseOut("background"),":hover":{background:c.b.GREY_LIGHTEST}},commentItemBody:{flex:1,paddingLeft:o.b.S100},commentItemAuthor:{marginBottom:o.b.S100}});function I(e){const{body:t,createdBy:n,createdAt:o,onClick:i,children:c}=e,[d,p]=b.useState(!1);return b.createElement(s.b,{styles:[S.commentItem,i&&S.commentItemClickable],onClick:i,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1)},b.createElement(s.b,null,b.createElement(a.b,{ownerID:n,size:"small"})),b.createElement(s.b,{styles:[S.commentItemBody]},(0,r.i)({author:l.b.queryByID(n)},e=>{let{author:t}=e;return b.createElement(s.b,{styles:[S.commentItemAuthor]},b.createElement(m.b.UIH200,null,t?t.displayName:""),b.createElement(m.b.UIH200,{styles:[m.b.COLOR.greyBase]}," - ",b.createElement(u.m,{value:o})))}),b.createElement(v,{body:t,hovered:Boolean(i&&d)}),c))}},42764:(e,t,n)=>{"use strict";n.d(t,{f:()=>m});var r=n(90528),a=n(25453),l=n(41413),o=n(67294),i=n(92839),c=n.n(i);const s=l.StyleSheet.create({commentsPlaceholder:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},commentsPlaceholderImage:{width:80,height:80}});function m(e){return o.createElement(r.b,{styles:[s.commentsPlaceholder]},o.createElement(a.k,{styles:[s.commentsPlaceholderImage],src:c()}))}},78189:(e,t,n)=>{"use strict";n.d(t,{h:()=>m});var r=n(80822),a=n(49027),l=n(90528),o=n(24925),i=n(41413),c=n(67294);const s=i.StyleSheet.create({repliesDivider:{position:"relative",textAlign:"center",marginTop:-r.b.S100,marginLeft:r.b.S200,marginRight:r.b.S200,marginBottom:-r.b.S100,background:a.b.WHITE,color:a.b.GREY_BASE,":before":{position:"absolute",left:0,right:0,height:1,top:"50%",background:a.b.GREY_LIGHT,content:'" "'}},repliesDividerText:{position:"relative",zIndex:1,background:a.b.WHITE,paddingLeft:r.b.S200,paddingRight:r.b.S200}});function m(e){const{count:t}=e;return c.createElement(l.b,{styles:[s.repliesDivider]},c.createElement(o.b.InfoH100,{styles:[s.repliesDividerText]},t>0?t+" ":"",1===t?"Reply":"Replies"))}},23504:(e,t,n)=>{"use strict";n.d(t,{s:()=>s});var r=n(43099),a=n(35602),l=n(67294),o=n(448),i=n(56057);function c(e){const{replies:t,scrollableRef:n}=e,r=l.useRef(!1);return l.useEffect(()=>{const e=n.current;e&&r.current&&(e.scrollTop=e.scrollHeight),r.current=!0},[t.size]),l.createElement(l.Fragment,null,t.valueSeq().map(e=>l.createElement(i.n,{key:e.uid,createdAt:e.createdAt,createdBy:e.createdBy,body:e.body})))}function s(e){const{activityID:t,scrollableRef:n}=e,i=(0,o.b)();return(0,r.i)({replies:a.b.queryByActivity({spaceID:i.uid,activityID:t})},e=>{let{replies:t}=e;return l.createElement(c,{replies:t,scrollableRef:n})})}},91090:(e,t,n)=>{"use strict";n.d(t,{g:()=>o});var r=n(67294),a=n(33230),l=n(69834);function o(e){const{activity:t}=e,{postReply:n}=(0,l.u)(),o=r.useRef(null);return r.useEffect(()=>{o.current&&o.current.focus()}),r.createElement(a.y,{ref:o,placeholder:"Leave a reply",onPost:e=>{n({activity:t,body:e})}})}},68330:(e,t,n)=>{"use strict";n.d(t,{d:()=>d});var r=n(47984),a=n(9780),l=n(49027),o=n(6970),i=n(90528),c=n(1417),s=n(41413),m=n(67294);const u=s.StyleSheet.create({watchingControlsIcon:{position:"relative",cursor:"pointer"},watchingControlsButtonLight:{color:l.b.GREY_BASE,":hover":{color:l.b.WHITE}},watchingControlsButtonDark:{color:l.b.GREY_BASE,":hover":{color:l.b.BLUE_BASE}},watchingControlsButton:{padding:0}}),d=m.forwardRef((function(e,t){const{isWatching:n,onClick:l,small:s=!1,styles:d}=e,b=o.b.useTheme(),p=s?"text":"medium";return m.createElement(i.b,{ref:t,onClick:l,"aria-label":n?"Watching":"Not watching",styles:[i.b.PADDING.S100,u.watchingControlsIcon,"dark"===b?u.watchingControlsButtonDark:u.watchingControlsButtonLight,c.b.tooltipped,c.b.delayed,c.b.bottomLeft,d]},n?m.createElement(r.b,{size:p}):m.createElement(a.b,{size:p}))}))},13185:(e,t,n)=>{"use strict";n.d(t,{f:()=>c});n(88674);var r=n(90451),a=n(47984),l=n(9780),o=n(33898),i=n(67294);function c(e){const{isWatching:t,preferences:n}=e,c=(0,r.z)(),s=async t=>{const r=n.setPreferences("comment",{app:t});await c.database.commit(r.toCreateUpdate()),e.onClick&&e.onClick()};return i.createElement(o.b,null,i.createElement(o.b.Item,{active:t,onClick:()=>t?null:s(!0),icon:i.createElement(a.b,null),hint:"You will be notified whenever someone replies on this activity.",multiline:!0},"Watching"),i.createElement(o.b.Divider,null),i.createElement(o.b.Item,{active:!t,onClick:()=>t?s(!1):null,icon:i.createElement(l.b,null),hint:"You will not be notified for replies.",multiline:!0},"Not watching"))}},53323:(e,t,n)=>{"use strict";n.d(t,{y:()=>m});n(66992),n(32023),n(33948);var r=n(33564),a=n(69481),l=n(60941),o=n(47803),i=n(73671),c=n(448),s=n(42263);function m(){const{contentContext:e}=(0,s.p)(),t=(0,c.b)(),n=(0,r.X)(),{draftID:m=null,activityID:u=null}=e,{fetchedPreferences:d,fetchedDraft:b,fetchedActivity:p}=(0,a.f)({fetchedPreferences:l.b.queryByID({userID:n.uid,spaceID:t.uid,draftID:m,activityID:u}),fetchedDraft:m?o.b.queryByID({spaceID:t.uid,draftID:m}):null,fetchedActivity:u?i.b.queryByID({spaceID:t.uid,activityID:u}):null});if(!d.isFetched||b&&!b.isFetched||p&&!p.isFetched)return{isLoading:!0,preferences:null,isWatching:!1};const y=d.value||new l.b({userID:n.uid,spaceID:t.uid,draftID:m,activityID:u}),g=b?b.value:null,E=p?p.value:null;let f;f=E?[E.actorID,...E.replies.users.toArray()]:g?g.edits.users.toArray():t.edits.users.toArray();const h=y.categories.get("comment")?y.categories.get("comment").app:null;return{isLoading:!1,isWatching:null===h&&f.includes(n.uid)||!0===h,preferences:y}}},44104:(e,t,n)=>{"use strict";n.d(t,{p:()=>c});n(88674);var r=n(90451),a=n(47803),l=n(46811),o=n(448),i=n(4222);function c(){const e=(0,i.a)(),t=(0,r.z)(),n=(0,o.b)(),c=async r=>{const{versionID:o,pageID:i}=r.payload,c={toDraft:r.draftID,toPrimary:!r.draftID,toCommentAnchor:r.payload.nodeID,toActivity:r.uid},m=r.draftID?await t.database.getDocument(a.b.queryByID({spaceID:n.uid,draftID:r.draftID})):null;let u=await t.database.getDocument(l.b.queryByID({spaceID:n.uid,revisionID:m?m.revisionCurrent:n.primaryRevision}));if(c.toPage=s(u,o,i),null===c.toPage){if(!(u=await t.database.getDocument(l.b.queryByID({spaceID:n.uid,revisionID:r.revisionID}))))throw new Error("This revision should exist");c.toRevision=r.revisionID,c.toPage=s(u,o,i)}c.toPrimaryVersion=u.primaryVersionID===o,c.toVersion=u.primaryVersionID===o?null:o,c.toActivity=r.uid,e(c)};return{openActivityList:()=>{e({toActivityList:!0})},closeActivityList:()=>{e({toActivityList:!1})},openActivity:t=>{switch(t.payload.type){case"draft/created":e({toDiff:!1,toDraft:t.draftID,toRevision:t.revisionID,toActivity:t.uid});break;case"draft/edited":e({toDiff:!0,toDraft:t.draftID,toRevision:t.revisionID,toActivity:t.uid});break;case"content/comment":c(t);break;default:e({toDiff:!1,toDraft:t.draftID,toActivity:t.uid})}},closeActivity:()=>{e({toDiff:!1,toRevision:void 0,toActivityList:!0})},openNodeComments:t=>{e({toCommentAnchor:t})},openContentComment:c,closeContentComments:()=>{e({})}}}function s(e,t,n){const r=e.versions.get(t);if(!r)return null;const a=r.page.getByID(n);return a?r.page.getURLOf(a):null}},69834:(e,t,n)=>{"use strict";n.d(t,{u:()=>s});n(88674);var r=n(90451),a=n(73671),l=n(35602),o=n(17720),i=n(448),c=n(90242);function s(){const e=(0,r.z)(),t=(0,o.b)(),n=(0,i.b)(),{revision:s,draft:m}=(0,c.p)();return{postComment:async r=>{if(!s)return;const l=a.b.createComment({actorID:e.auth.user.uid,draftID:m?m.uid:null,revisionID:s.uid,body:r.body});await e.database.commit(l.toCreateUpdate(n.uid)),e.analytics.trackPostComment({owner:t,space:n,body:r.body,onDraft:!!m,onContent:null})},postContentComment:async r=>{if(!s)return;const l=a.b.createContentComment({actorID:e.auth.user.uid,draftID:r.draftID,revisionID:s.uid,pageID:r.pageID,versionID:r.versionID,nodeID:r.block.key,body:r.body});await e.database.commit(l.toCreateUpdate(n.uid)),e.analytics.trackPostComment({owner:t,space:n,body:r.body,onDraft:!!m,onContent:r.block.type})},postReply:async r=>{const{body:a,activity:o}=r,i=l.b.create({body:r.body,createdBy:e.auth.user.uid});await e.database.commit(i.toCreateUpdate({spaceID:n.uid,activityID:o.uid})),e.analytics.trackPostReply({owner:t,space:n,body:a,onDraft:!!m,onActivity:o.payload.type})}}}},90242:(e,t,n)=>{"use strict";n.d(t,{p:()=>c});var r=n(69481),a=n(47803),l=n(46811),o=n(448),i=n(42263);function c(){const{contentContext:e}=(0,i.p)(),t=(0,o.b)(),{draftID:n}=e,c=t.uid,{draftQuery:s}=(0,r.f)({draftQuery:n?a.b.queryByID({spaceID:c,draftID:n}):null}),m=s?s.value:null,{revisionQuery:u}=(0,r.f)({revisionQuery:s&&s.isFetched||!s?l.b.queryByID({spaceID:c,revisionID:m?m.revisionCurrent:t.primaryRevision}):null});return{draft:m,revision:u?u.value:null}}},38727:(e,t,n)=>{"use strict";n.r(t);var r=n(80822),a=n(88578),l=n(90528),o=n(67794),i=n(41413),c=n(67294),s=n.n(c),m=n(42263),u=(n(66992),n(33948),n(43099)),d=n(73671),b=n(4222),p=n(65252),y=n(448),g=n(25453),E=n(99374),f=n.n(E);const h=i.StyleSheet.create({activitiesPlaceholder:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},activitiesPlaceholderImage:{width:80,height:80}});function v(e){return c.createElement(l.b,{styles:[h.activitiesPlaceholder]},c.createElement(g.k,{styles:[h.activitiesPlaceholderImage],src:f()}))}var S=n(44104),I=n(6911),w=n(49027),D=n(95993),k=n(82128),C=n(24925),R=n(33230),L=n(69834);function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const T=r.b.S200,A=i.StyleSheet.create({commentInputContainer:{position:"relative",marginRight:r.b.S100/2,marginBottom:r.b.S200,":hover":{background:w.b.GREY_BLUE_DARKER,borderRadius:D.b.RADIUS_NORMAL},zIndex:1},timeline:{position:"absolute",left:T+15-1,background:w.b.GREY_BLUE_DARK,top:0,bottom:"50%",width:2,zIndex:2},activeContainer:{marginTop:0,background:w.b.WHITE,borderRadius:D.b.RADIUS_NORMAL,position:"relative",zIndex:3},passiveContainer:{padding:r.b.S200,color:w.b.GREY_BASE,display:"flex",alignItems:"center",cursor:"pointer",zIndex:3,position:"relative",marginTop:-r.b.S100},passiveIcon:{width:30,height:30,borderRadius:"50%",backgroundColor:w.b.GREY_BLUE_DARK,color:w.b.WHITE,display:"flex",alignItems:"center",justifyContent:"center"},passiveText:{marginLeft:r.b.S100}});function O(e){const{postComment:t}=(0,L.u)(),[n,r]=c.useState(!1),a=(0,k.c)(()=>r(!1)),o=c.useRef();c.useEffect(()=>{o.current&&n&&o.current.focus()});return c.createElement(l.b,{styles:[A.commentInputContainer]},c.createElement(l.b,{styles:[A.timeline]}),n?c.createElement(l.b,x({styles:[A.activeContainer]},a),c.createElement(R.y,{ref:o,onPost:e=>{t({body:e})},onClose:()=>r(!1)})):c.createElement(l.b,{onClick:()=>r(!0),styles:[A.passiveContainer]},c.createElement(l.b,{styles:[A.passiveIcon]},c.createElement(I.b,null)),c.createElement(C.b.TextH200,{styles:[A.passiveText]},"Leave a comment")))}n(88674);var H=n(86409),B=n(11022),P=n(23674);function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const _=function(e){return s().createElement(P.b,G({},{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor",fill:"none"},e),s().createElement("g",null,s().createElement("polyline",{points:"4 7 4 4 20 4 20 7"}),s().createElement("line",{x1:"9",y1:"20",x2:"15",y2:"20"}),s().createElement("line",{x1:"12",y1:"4",x2:"12",y2:"20"})))};var z=n(80915),N=n(84087),M=n(71053),U=n(59386),j=n(91679),F=n(58690);function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const q=function(e){return s().createElement(P.b,Y({},{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor",fill:"none"},e),s().createElement("g",null,s().createElement("path",{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"})))};var W=n(34462);function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const X=function(e){return s().createElement(P.b,K({},{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",stroke:"none",fill:"currentColor"},e),s().createElement("g",null,s().createElement("path",{d:"M18 12a1 1 0 0 0-1-1H7a1 1 0 0 0 0 2h10a1 1 0 0 0 1-1zm0-4a1 1 0 0 0-1-1H7a1 1 0 0 0 0 2h10a1 1 0 0 0 1-1zM5 4c-.551 0-1 .449-1 1v13.586l2.293-2.293A.997.997 0 0 1 7 16h12a1 1 0 0 0 1-1V5c0-.551-.448-1-1-1H5zM3 22a1 1 0 0 1-1-1V5c0-1.654 1.346-3 3-3h14c1.654 0 3 1.346 3 3v10c0 1.654-1.346 3-3 3H7.414l-3.707 3.707A1 1 0 0 1 3 22z",fillRule:"evenodd"})))};var V=n(6190),Z=n(16256),Q=n(6970);var $=n(42764),J=n(91090),ee=n(78189),te=n(23504),ne=n(27813),re=n(6367),ae=n(53323),le=n(68330),oe=n(13185);function ie(e){const{buttonStyles:t}=e,{isLoading:n,isWatching:r,preferences:a}=(0,ae.y)();return n?null:c.createElement(ne.b.Toggeable,{closeOnClick:!0,anchor:e=>{let{ref:n,onToggle:a}=e;return c.createElement(le.d,{ref:n,isWatching:r,onClick:a,styles:t})},wrapper:re.b.Container},c.createElement(re.b,{position:"south",align:"end"},c.createElement(oe.f,{preferences:a,isWatching:r})))}var ce=n(47803),se=n(45903),me=n(46811),ue=n(98444),de=n(1417),be=n(90242);const pe=i.StyleSheet.create({commentHeader:{display:"flex",flexDirection:"row"},commentHeaderInner:{flex:1},commentLabel:{color:w.b.GREY_BASE,marginLeft:r.b.S200,alignSelf:"flex-start"}});function ye(e){const{label:t,icon:n,children:r}=e;return c.createElement(l.b,{styles:[pe.commentLabel,de.b.tooltipped,de.b.left],"aria-label":t},c.createElement(C.b.UIH200,null,r)," ",n)}function ge(e,t,n){if(!e)return null;const r=e.versions.get(t);if(!r)return null;const a=r.page.getByID(n);if(!a)return null;const l=r.page.getURLOf(a);return{page:a,isPrimaryVersion:e.primaryVersionID===t,pageURL:l}}const Ee={"draft/created":function(e){const{activity:t,actor:n,asRelative:r,isSelected:a}=e;return c.createElement(l.b,null,c.createElement(C.b.TextH200,null,n),c.createElement(C.b.TextH200,{styles:[C.b.COLOR.greyBase]},c.createElement(ve,{isSelected:a}," started "),r?c.createElement(ve,{isSelected:a},"this draft"):c.createElement(Se,{draftID:t.draftID})," - ",c.createElement(se.m,{value:t.createdAt})))},"draft/renamed":function(e){const{activity:t,actor:n,isSelected:r}=e;return c.createElement(l.b,null,c.createElement(C.b.TextH200,null,n),c.createElement(C.b.TextH200,{styles:[C.b.COLOR.greyBase]},c.createElement(ve,{isSelected:r}," changed the title"),t.payload.before&&c.createElement(c.Fragment,null," from ",c.createElement(ve,{isSelected:r},'"'+t.payload.before+'"'))," to ",c.createElement(ve,{isSelected:r},'"'+t.payload.after+'"')," - ",c.createElement(se.m,{value:t.createdAt})))},"draft/merged":function(e){const{activity:t,actor:n,asRelative:r,isSelected:a}=e;return c.createElement(l.b,null,c.createElement(C.b.TextH200,null,n),c.createElement(C.b.TextH200,{styles:[C.b.COLOR.greyBase]},r?c.createElement(ve,{isSelected:a}," merged this draft"):c.createElement(c.Fragment,null,c.createElement(ve,{isSelected:a}," merged "+he(t.payload)+" edits")," from ",c.createElement(Se,{draftID:t.draftID}))," - ",c.createElement(se.m,{value:t.createdAt})))},"draft/closed":function(e){const{activity:t,actor:n,asRelative:r,isSelected:a}=e;return c.createElement(l.b,null,c.createElement(C.b.TextH200,null,n),c.createElement(C.b.TextH200,{styles:[C.b.COLOR.greyBase]},c.createElement(ve,{isSelected:a}," archived ",r?"this draft":c.createElement(Se,{draftID:t.draftID}))," - ",c.createElement(se.m,{value:t.createdAt})))},"draft/opened":function(e){const{activity:t,actor:n,asRelative:r,isSelected:a}=e;return c.createElement(l.b,null,c.createElement(C.b.TextH200,null,n),c.createElement(C.b.TextH200,{styles:[C.b.COLOR.greyBase]},c.createElement(ve,{isSelected:a}," unarchived ",r?"this draft":c.createElement(Se,{draftID:t.draftID}))," - ",c.createElement(se.m,{value:t.createdAt})))},"draft/edited":function(e){const{activity:t,actor:n,isSelected:r}=e;return c.createElement(l.b,null,c.createElement(C.b.TextH200,null,n),c.createElement(C.b.TextH200,{styles:[C.b.COLOR.greyBase]},c.createElement(ve,{isSelected:r}," made "+he(t.payload)+" edits")," - ",c.createElement(se.m,{value:t.createdAt})))},"revision/restored":function(e){const{activity:t,actor:n,isSelected:r}=e;return c.createElement(l.b,null,c.createElement(C.b.TextH200,null,n),c.createElement(C.b.TextH200,{styles:[C.b.COLOR.greyBase]},c.createElement(ve,{isSelected:r}," rollbacked "+he(t.payload)+" edits")," - ",c.createElement(se.m,{value:t.createdAt})))},comment:function(e){const{activity:t,actor:n,isSelected:r}=e;return c.createElement(l.b,null,c.createElement(C.b.TextH200,null,n),c.createElement(C.b.TextH200,{styles:[C.b.COLOR.greyBase]},c.createElement(ve,{isSelected:r}," left a comment")," - ",c.createElement(se.m,{value:t.createdAt})))},"content/comment":function(e){const{activity:t,actor:n,isSelected:r}=e,{revision:a,draft:o}=(0,be.p)(),i=(0,y.b)(),{versionID:s,pageID:m,body:d}=t.payload;return(0,u.i)({revision:me.b.queryByID({spaceID:i.uid,revisionID:t.revisionID})},e=>{let{revision:o}=e;const i=ge(a,s,m),u=o?ge(o,s,m):null,d=i||u,b=!d||!i;return c.createElement(l.b,null,c.createElement(l.b,{styles:[pe.commentHeader]},c.createElement(l.b,{styles:[pe.commentHeaderInner]},c.createElement(C.b.TextH200,null,n),c.createElement(C.b.TextH200,{styles:[C.b.COLOR.greyBase]},c.createElement(ve,{isSelected:r}," left a comment")," on page ",c.createElement(ve,{isSelected:r},'"'+(d&&d.page.title)+'"')," - ",c.createElement(se.m,{value:t.createdAt}))),b&&c.createElement(ye,{label:"The page has been deleted",icon:c.createElement(ue.b,{size:"medium"})},"Outdated")))})},"github/imported":function(e){const{activity:t,actor:n,isSelected:r}=e;return c.createElement(l.b,null,c.createElement(C.b.TextH200,null,n),c.createElement(C.b.TextH200,{styles:[C.b.COLOR.greyBase]},c.createElement(ve,{isSelected:r}," imported  "+he(t.payload)+" edits")," from ",c.createElement(ve,{isSelected:r},"GitHub")," - ",c.createElement(se.m,{value:t.createdAt})))}};function fe(e){const{activity:t,actor:n,asRelative:r,isSelected:a}=e,l=Ee[t.payload.type];return c.createElement(l,{activity:t,actor:n,asRelative:r,isSelected:a})}function he(e){return e.addedPages+e.addedVersions+(e.removedPages+e.removedVersions)+(e.modifiedPages+e.modifiedVersions)}function ve(e){const{children:t,isSelected:n}=e;return c.createElement("span",{className:(0,i.css)([n?C.b.COLOR.black:C.b.COLOR.white])},t)}function Se(e){const t=(0,y.b)(),{draftID:n}=e;return n?(0,u.i)({draft:ce.b.queryByID({spaceID:t.uid,draftID:n})},e=>{let{draft:t}=e;const n=t?t.title:"";return n?c.createElement(c.Fragment,null,"draft ",c.createElement(ve,null,'"'+n+'"')):c.createElement(ve,null,"a draft")}):c.createElement(ve,null,"a draft")}const Ie=r.b.S200,we={"draft/created":I.b,"draft/renamed":_,"draft/merged":z.b,"draft/closed":N.b,"draft/opened":M.b,"draft/edited":U.b,"revision/restored":j.b,comment:F.b,"content/comment":F.b,"github/imported":q},De={"draft/created":C.b.COLOR.orangeBase,"draft/renamed":C.b.COLOR.greyBase,"draft/merged":C.b.COLOR.brightBlueLight,"draft/closed":C.b.COLOR.greyBase,"draft/opened":C.b.COLOR.greyBase,"draft/edited":C.b.COLOR.greyBase,"revision/restored":C.b.COLOR.greyBase,comment:C.b.COLOR.greyBase,"content/comment":C.b.COLOR.greyBase,"github/imported":C.b.COLOR.greyBase},ke=i.StyleSheet.create({activityItem:{position:"relative",display:"flex",flexDirection:"column",flexGrow:1,borderRadius:D.b.RADIUS_NORMAL,marginRight:r.b.S100/2,overflow:"hidden",":not(:first-child)":{marginTop:-r.b.S100},":before":{position:"absolute",left:Ie+15-1,width:2,top:0,bottom:0,content:'" "',background:w.b.GREY_BLUE_DARK},":first-child:before":{top:"50%"},":last-child:before":{bottom:"auto",height:r.b.S200},":last-child":{marginBottom:r.b.S200},":first-child:last-child:before":{display:"none"}},activityItemHovered:{cursor:"pointer",background:w.b.GREY_BLUE_DARKER},activityItemHoveredIcon:{height:"100%",position:"absolute",top:0,right:0,display:"inline-flex",alignItems:"center",padding:D.b.PADDING_SMALL,paddingRight:D.b.PADDING_NORMAL,backgroundColor:w.b.GREY_BLUE_DARKER,boxShadow:"-8px 0px 8px "+w.b.GREY_BLUE_DARKER},activityItemSelected:{marginBottom:r.b.S100,background:w.b.WHITE,":not(:first-child)":{marginTop:0},":before":{background:w.b.WHITE}},activityItemHeader:{position:"relative",paddingLeft:Ie,paddingTop:D.b.PADDING_NORMAL,paddingRight:D.b.PADDING_NORMAL,display:"flex",flexGrow:1,flexDirection:"row",alignItems:"start"},activityItemHeaderNoBody:{paddingBottom:D.b.PADDING_NORMAL},activityItemHeaderTitle:{display:"flex",flexDirection:"row",alignItems:"start",marginTop:r.b.S100,marginLeft:r.b.S100,whiteSpace:"wrap",overflow:"hidden"},activityItemHeaderTitleIcon:{marginRight:r.b.S100/2,width:Z.b.SIZE_ICON_SMALL,height:Z.b.SIZE_ICON_SMALL},activityItemHeaderActions:{marginLeft:"auto",paddingLeft:D.b.PADDING_SMALL,display:"inline-flex"},activityItemHeaderActionsPassive:{marginLeft:"auto",marginTop:r.b.S100,display:"inline-flex",alignItems:"center"},activityItemHeaderActionsPassiveCountIcon:{marginRight:r.b.S100/2,width:Z.b.SIZE_ICON_SMALL,height:Z.b.SIZE_ICON_SMALL},activityItemHeaderActionsActive:{marginLeft:"auto",display:"inline-flex"},activityItemBody:{position:"relative"},activityItemBodyComment:{marginLeft:r.b.S700,marginTop:r.b.S100,marginRight:r.b.S200,marginBottom:r.b.S200,color:w.b.WHITE,backgroundColor:w.b.WHITE_OP_10,borderRadius:D.b.RADIUS_NORMAL,padding:D.b.PADDING_SMALL,wordBreak:"break-word"},activityItemBodyCommentSelected:{color:w.b.BLACK},activityItemBodyRepliesPlaceholder:{paddingBottom:D.b.PADDING_NORMAL},activityItemBodyReplies:{maxHeight:200},activityItemBodyReplyInput:{borderTop:"1px solid "+w.b.GREY_BLUE_LIGHTER}});function Ce(e){const{spaceID:t,activity:n,isSelected:r,isDraft:a=!0,onClick:o}=e,[i,m]=function(){const[e,t]=(0,c.useState)(!1),n=s().useRef(),r=()=>t(!0),a=()=>t(!1);return(0,c.useEffect)(()=>{const e=n.current;if(e)return e.addEventListener("mouseenter",r),e.addEventListener("mouseleave",a),()=>{e&&(e.removeEventListener("mouseenter",r),e.removeEventListener("mouseleave",a))}},[n.current]),[n,e]}(),u=!a&&!r&&m,d=n.replies.total>0,b=n.isComment;return c.createElement(l.b,{ref:i,styles:[ke.activityItem,!r&&m&&ke.activityItemHovered,r&&ke.activityItemSelected],onClick:o},c.createElement(Le,{activity:n,isSelected:r,isDraft:a,isComment:b,hasReplies:d}),c.createElement(He,{spaceID:t,activity:n,isSelected:r,isComment:b,hasReplies:d}),u&&c.createElement(Re,null))}function Re(e){return c.createElement(l.b,{styles:[ke.activityItemHoveredIcon]},c.createElement(W.b,{style:{width:18,height:18}}))}function Le(e){const{activity:t,isSelected:n,isDraft:r,isComment:a,hasReplies:o}=e;return c.createElement(l.b,{styles:[ke.activityItemHeader,!a&&ke.activityItemHeaderNoBody]},c.createElement(H.b,{ownerID:t.actorID,size:"small"}),c.createElement(l.b,{styles:[ke.activityItemHeaderTitle]},c.createElement(xe,{type:t.payload.type}),c.createElement(Te,{activity:t,isDraft:r,isSelected:n})),c.createElement(l.b,{styles:[ke.activityItemHeaderActions]},!n&&o&&c.createElement(Ae,{repliesCount:t.replies.total}),n&&c.createElement(Oe,null)))}function xe(e){const{type:t}=e,n=we[t],r=De[t];return c.createElement(l.b,{styles:[ke.activityItemHeaderTitleIcon,r]},c.createElement(n,{size:"small"}))}function Te(e){const{activity:t,isDraft:n,isSelected:r}=e;return(0,u.i)({actor:B.b.queryByID(t.actorID)},e=>{let{actor:a}=e;return c.createElement(fe,{activity:t,actor:a?a.shortDisplayName:"",asRelative:n,isSelected:r})})}function Ae(e){const{repliesCount:t}=e;return t?c.createElement(l.b,{styles:[ke.activityItemHeaderActionsPassive]},c.createElement(X,{styles:[ke.activityItemHeaderActionsPassiveCountIcon],size:"small"}),c.createElement(C.b.TextH200,null,t)):null}function Oe(e){const{closeActivity:t}=(0,S.p)();return c.createElement(l.b,{styles:[ke.activityItemHeaderActionsActive]},c.createElement(ie,null),c.createElement(p.b,{kind:"cancel",size:"small",icon:c.createElement(V.b,null),rounded:!0,onClick:async e=>{e.stopPropagation(),t()}}))}function He(e){const{spaceID:t,activity:n,isSelected:r,isComment:a,hasReplies:o}=e;return c.createElement(l.b,{styles:[ke.activityItemBody]},a&&c.createElement(Be,{activity:n,isSelected:r}),r&&o&&c.createElement(Pe,{spaceID:t,activity:n}),r&&!o&&c.createElement(l.b,{styles:[ke.activityItemBodyRepliesPlaceholder]},c.createElement($.f,null)),r&&c.createElement(l.b,{styles:[ke.activityItemBodyReplyInput]},c.createElement(J.g,{activity:n})))}function Be(e){const{activity:t,isSelected:n}=e;return c.createElement(l.b,{styles:[ke.activityItemBodyComment,n&&ke.activityItemBodyCommentSelected]},c.createElement(C.b.TextH200,null,t.payload.body))}function Pe(e){const{activity:t}=e,n=c.useRef();return c.createElement(l.b,null,c.createElement(ee.h,{count:t.replies.total}),c.createElement(o.b,{ref:n,styles:[ke.activityItemBodyReplies]},c.createElement(Q.b,{theme:"light"},c.createElement(te.s,{scrollableRef:n,activityID:t.uid}))))}n(56977);var Ge=n(34582),_e=n(18643);function ze(){return(ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Ne=function(e){return s().createElement(P.b,ze({},{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor",fill:"none"},e),s().createElement("g",null,s().createElement("polyline",{points:"23 4 23 10 17 10"}),s().createElement("polyline",{points:"1 20 1 14 7 14"}),s().createElement("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})))};var Me=n(34859),Ue=n(7159),je=n(64574),Fe=n(47509),Ye=n(35617),qe=n(17970);const We=r.b.S200,Ke=i.StyleSheet.create({githubSyncActivityItem:{position:"relative",display:"flex",flexDirection:"row",alignItems:"center",flexGrow:1,borderRadius:D.b.RADIUS_NORMAL,marginRight:r.b.S100/2,overflow:"hidden",paddingLeft:D.b.PADDING_NORMAL,paddingTop:D.b.PADDING_NORMAL,paddingRight:D.b.PADDING_NORMAL,paddingBottom:D.b.PADDING_NORMAL,marginBottom:r.b.S200,":before":{position:"absolute",left:We+15-1,width:2,top:0,bottom:"50%",content:'" "',background:w.b.GREY_BLUE_DARK},":not(:first-child)":{marginTop:-r.b.S100},":hover":{cursor:"pointer",background:w.b.GREY_BLUE_DARKER}},avatarContainer:{width:30,height:30,borderRadius:"100%",backgroundColor:w.b.GREY_BLUE_DARK,color:w.b.WHITE,display:"flex",alignItems:"center",justifyContent:"center"},iconContainer:{marginLeft:r.b.S100,marginRight:"calc("+r.b.S100/2+"px)",width:Z.b.SIZE_ICON_SMALL,height:Z.b.SIZE_ICON_SMALL,color:w.b.GREY_BASE},textContainer:{color:w.b.GREY_BASE},statusContainer:{marginLeft:"auto",width:16,fontSize:Z.b.SIZE_ICON_MEDIUM},statusRunning:{color:w.b.BLUE_BASE},statusError:{color:w.b.RED_BASE}});function Xe(e){const t=(0,y.b)(),[n,r]=c.useState(!1);return(0,u.i)({statuses:t.hasGitHubSync?_e.y.queryBySpace(t.uid):null},e=>{let{statuses:t}=e;const a=t?t.first():null;return a?c.createElement(l.b,{styles:[Ke.githubSyncActivityItem],onClick:()=>{r(!0)}},c.createElement(l.b,{styles:[Ke.avatarContainer]},c.createElement(q,null)),c.createElement(l.b,{styles:[Ke.iconContainer]},c.createElement(Ne,{size:"small"})),c.createElement(l.b,{styles:[Ke.textContainer]},c.createElement(C.b.TextH200,null,function(e){switch(e){case"import":return"Importing from GitHub";case"export":return"Exporting to GitHub";case"migration":return"Migrating from Legacy";default:return}}(a.type))),c.createElement(Ve,{status:a}),n&&c.createElement(Ze,{status:a,onClose:()=>r(!1)})):null})}function Ve(e){const{status:t}=e,n=t.hasError||t.hasTimeout;return c.createElement(l.b,{styles:[Ke.statusContainer]},n?c.createElement(l.b,{styles:[Ke.statusError]},c.createElement(Me.b,null)):c.createElement(l.b,{styles:[Ke.statusRunning]},c.createElement(Ue.b,{percentage:t.progress,strokeWidth:15,textForPercentage:()=>"",backgroundColor:w.b.GREY_BLUE_DARKER,color:w.b.WHITE})))}function Ze(e){const{status:t,onClose:n}=e,{openSupportDialog:r}=(0,Ge.h)(),{progress:o}=t,i=t.hasError||t.hasTimeout,s=function(e){switch(e){case"import":return"Changes are being imported from GitHub.";case"export":return"Changes are being exported to GitHub.";default:return"Your legacy content is being imported."}}(t.type);return c.createElement(a.b.Brand,null,c.createElement(je.g,{onClose:n},c.createElement(Fe.y,{size:"medium"},c.createElement(Fe.y.Header,null,c.createElement(Fe.y.Title,null,i?"Synchronization failed":"Synchronizing with GitHub ("+o.toFixed(0)+"%)")),c.createElement(Fe.y.Body,null,!i&&c.createElement(l.b,{styles:[l.b.MARGIN.S200Bottom]},c.createElement(C.b.TextH400,null,s," It may take a few minutes.")),(t.hasError||t.hasTimeout)&&c.createElement(c.Fragment,null,c.createElement(l.b,{styles:[l.b.MARGIN.S200Bottom]},c.createElement(C.b.TextH400,null,function(e){switch(e){case"import":return"An error occurred while importing your content from GitHub.";case"export":return"An error occurred while exporting your content to GitHub.";default:return"An error occurred while migrating your content."}}(t.type))),c.createElement(l.b,{styles:[l.b.MARGIN.S200Bottom]},c.createElement(Ye.b,{kind:"danger"},c.createElement(C.b.TextH400,null,t.hasError?t.error:"The synchronization timed out")))),i&&c.createElement(l.b,null,c.createElement(C.b.TextH400,null,"Our team has already been notified. You can learn more about the"," ",c.createElement(qe.d,{href:"https://docs.gitbook.com/integrations/github/limitations#common-errors",target:"_blank"},"common errors")," ","and/or"," ",c.createElement(qe.d,{component:"span",onClick:()=>r()},"contact us")," ","for more details."))),c.createElement(Fe.y.Footer,null,c.createElement(l.b,null,c.createElement(p.b,{kind:"cancel",onClick:n},"Close"))))))}const Qe=25,$e=5,Je=i.StyleSheet.create({activitiesListing:{display:"flex",flexDirection:"column",flex:1,height:"100%",position:" relative",zIndex:0},activitiesScrollableList:{flex:1,paddingTop:r.b.S100},activitiesLoadMoreButton:{marginRight:r.b.S100/2,marginBottom:r.b.S100,display:"flex",position:"relative",flexGrow:1,flexDirection:"column"}});function et(e){const{isDraft:t,draftID:n,selectedActivityID:r}=e,a=(0,y.b)(),[o,i]=c.useState(Qe),s=(n?d.b.queryByDraft({spaceID:a.uid,draftID:n}):d.b.queryForPrimary({spaceID:a.uid})).setOptions({waitFetched:!1}),m=()=>{i(e=>e+$e)};return c.createElement(l.b,{styles:[Je.activitiesListing]},(0,u.i)({activities:s.limitToLast(o),activitiesMore:s.limitToLast(o+1)},e=>{let{activities:n,activitiesMore:l}=e;if(0===n.size)return c.createElement(v,null);const o=n.keySeq().first()!==l.keySeq().first();return c.createElement(tt,{spaceID:a.uid,selectedActivityID:r,activities:n,isDraft:t,onFetchMore:m,hasMore:o})}))}function tt(e){const{spaceID:t,selectedActivityID:n,activities:r,isDraft:a,hasMore:i,onFetchMore:s}=e,m=c.useRef(),u=(0,b.a)(),{openActivity:d}=(0,S.p)(),y=r.keySeq().last();c.useEffect(()=>{if(n)return;const e=m.current;e&&(e.scrollTop=e.scrollHeight)},[y]);const{nodes:g}=r.reduce((e,r)=>({lastActor:r.actorID,nodes:[...e.nodes,c.createElement(Ce,{key:r.uid,spaceID:t,activity:r,isSelected:r.uid===n,isDraft:a,onClick:()=>(e=>{a?d(e):"github/imported"!==e.payload.type?u({toDraft:e.draftID,toActivityList:!0}):u({toRevision:e.revisionID,toActivityList:!0})})(r)})]}),{lastActor:null,nodes:[]});return c.createElement(o.b,{ref:m,styles:[Je.activitiesScrollableList]},i&&c.createElement(l.b,{styles:[Je.activitiesLoadMoreButton]},c.createElement(p.b,{kind:"secondary",size:"small",onClick:s},"Load more")),g,!a&&c.createElement(Xe,null),a&&c.createElement(O,null))}var nt=n(48265),rt=n(87609);const at=i.StyleSheet.create({controlsCenterTabHeader:{display:"flex",alignItems:"center",height:42},controlsCenterTabHeaderShadow:{zIndex:1,boxShadow:"0px 5px 6px "+w.b.GREY_BLUE_DARKEST}});function lt(e){const{text:t,children:n,isShadowed:r=!1}=e;return s().createElement(l.b,{styles:[at.controlsCenterTabHeader,r&&at.controlsCenterTabHeaderShadow]},t?s().createElement(C.b.InfoH100,null,t):n)}const ot=i.StyleSheet.create({activityDrawerHeader:{position:"relative",display:"flex",flex:1,flexDirection:"row",alignItems:"center",justifyContent:"space-between"},activityDrawerHeaderDescription:{},activityDrawerHeaderDescriptionClickable:{cursor:"pointer",transition:rt.b.fasterEaseOut("color"),":hover":{color:w.b.WHITE}},activityDrawerHeaderDescriptionText:{marginLeft:"calc("+r.b.S100+"px)"},activityDrawerHeaderTitle:{color:w.b.WHITE},activityDrawerHeaderIcon:{paddingRight:0},activityDrawerHeaderNotifications:{}});function it(e){const{isDraft:t}=e,n=(0,b.a)(),r=t?"All":"All activities",a=t?"Draft activities":"";return c.createElement(lt,{isShadowed:!0},c.createElement(l.b,{styles:[ot.activityDrawerHeader]},c.createElement(l.b,{styles:[ot.activityDrawerHeaderDescription,t&&ot.activityDrawerHeaderDescriptionClickable],onClick:()=>{t&&n({toPrimary:!0,toActivityList:!0})}},t&&c.createElement(nt.b,null),c.createElement(C.b.InfoH100,{styles:[t&&ot.activityDrawerHeaderDescriptionText]},r)),t&&c.createElement(l.b,{styles:[ot.activityDrawerHeaderTitle]},c.createElement(C.b.InfoH100,null,a)),c.createElement(l.b,{styles:[ot.activityDrawerHeaderNotifications]},c.createElement(Q.b,{theme:"light"},c.createElement(ie,{buttonStyles:ot.activityDrawerHeaderIcon})))))}const ct=i.StyleSheet.create({activityDrawer:{display:"flex",flexDirection:"column",flex:1,height:"100%"}});function st(e){const{contentContext:t}=(0,m.p)(),n=!!t.draftID;return c.createElement(l.b,{styles:[ct.activityDrawer]},c.createElement(it,{isDraft:n}),c.createElement(et,{isDraft:n,draftID:t.draftID,selectedActivityID:t.activityID}))}var mt=n(17720),ut=(n(23123),n(99747)),dt=n(90451),bt=n(42308),pt=n(70330),yt=n(65497),gt=n(34821);function Et(e){const{space:t,owner:n,opened:r,onToggle:a}=e,[o,i,s]=pt.b.useFormState(t.baseName),m=(0,ut.v)(),u=(0,dt.z)(),d=bt.b.validateBaseName(o)?null:"A project URL may only contain alphanumeric or dashes '-' and 1-50 characters",b=!!o&&s&&!d,y=n.getSpacesURL(m.domains.spaces);return c.createElement(pt.b,{onSubmit:e=>{e.preventDefault(),b&&u.database.commit(t.toBaseNameUpdate(o))}},c.createElement(yt.b,{size:"small",onClick:r?null:a},c.createElement(yt.b.Header,null,c.createElement(yt.b.Header.Left,null,c.createElement(yt.b.Header.Title,null,"Space URL")),!r&&c.createElement(yt.b.Header.Right,null,c.createElement(yt.b.Header.Hint,null,t.baseName))),r&&c.createElement(c.Fragment,null,c.createElement(yt.b.Body,null,c.createElement(pt.b.Group,{error:d},c.createElement(pt.b.Input,{type:"text",value:o,onChange:e=>{i(e.currentTarget.value)},hasError:!!d,onBlur:()=>{if(bt.b.validateBaseName(o))return;const e=bt.b.normalizeBaseName(o);i(e)}},c.createElement(gt.w,{content:y,fixed:!0},c.createElement(pt.b.InputAddOn,{prefix:!0},(g=y).length>20?g.slice(0,10)+"…"+g.slice(g.split("").length-11,g.split("").length)+"/":g+"/")))),c.createElement(l.b,{styles:[l.b.MARGIN.S100Bottom]},c.createElement(C.b.TextH200,{styles:[C.b.COLOR.greyBase]},"You can change your space's URL (web address), but out of courtesy to your teammates and visitors of your space, please don’t do this often.")),c.createElement(l.b,null,c.createElement(C.b.TextH200,{styles:[C.b.COLOR.greyBase]},"Users accessing the old URLs"," ",c.createElement(C.b,{styles:[C.b.COLOR.white,C.b.FORMAT.bold]},"will be redirected automatically"),"."))),s&&c.createElement(yt.b.Footer,null,c.createElement(yt.b.Footer.Controls,null,c.createElement(p.b,{type:"submit",disabled:!b},"Save Changes"))))));var g}var ft=n(30994);function ht(e){const{space:t,owner:n,opened:r,onToggle:a}=e,{setupCustomDomain:l}=(0,ft.a)(),o=(0,dt.z)();return c.createElement(yt.b,{size:"small",onClick:r?null:a},c.createElement(yt.b.Header,null,c.createElement(yt.b.Header.Left,null,c.createElement(yt.b.Header.Title,null,"Custom Domain")),c.createElement(yt.b.Header.Right,null,t.customDomain&&!r&&c.createElement(yt.b.Header.Hint,null,t.customDomain))),r&&c.createElement(c.Fragment,null,c.createElement(yt.b.Body,null,t.customDomain?c.createElement(pt.b.Input,{readOnly:!0,value:t.customDomain},c.createElement(pt.b.InputAddOn,{prefix:!0},"https://")):c.createElement(C.b.TextH200,{styles:C.b.COLOR.greyBase},"You have not set up any custom domains. You can set up one, such as"," ",c.createElement(C.b,{styles:[C.b.FORMAT.italic]},"docs.yourdomain.com"),".")),c.createElement(yt.b.Footer,null,c.createElement(yt.b.Footer.Controls,null,c.createElement(p.b.Toolbar,null,t.customDomain&&c.createElement(p.b,{kind:"link",onClick:()=>{window.confirm("Do you want to unlink this custom domain?")&&(o.database.commit(t.toCustomDomainUpdate(null)),o.analytics.trackRemoveCustomDomain(n,t))}},"Delete domain"),c.createElement(p.b,{onClick:()=>{l(n.uid,t.uid)}},"Configure"))))))}var vt=n(4393),St=n(81445),It=n(91447);function wt(e){const{owner:t,space:n}=e,r=(0,It.EE)(),{deleteSpace:a}=(0,vt.i)(),[l,o]=c.useState(!1);return c.createElement(c.Fragment,null,c.createElement(pt.b.ButtonField,{title:"Delete Space",hint:"Once deleted, it will be gone forever. Please be certain."},c.createElement(p.b,{kind:"danger",onClick:()=>{o(!0)}},"Delete")),l&&c.createElement(St.a,{space:n,onClose:()=>{o(!1)},onConfirm:async()=>{r.push("/@"+t.baseDomain+"/spaces"),await a(t,n)}}))}var Dt=n(94999),kt=n(14185);function Ct(e){const{space:t}=e,n=(0,mt.b)(),[r,a]=c.useState(!1),{exportSpaceArchive:l}=(0,Dt.a)();return c.createElement(pt.b.ButtonField,{title:"Export Content",hint:c.createElement(c.Fragment,null,"Will create a .zip file of your space. Please note that you cannot import the content back to GitBook. Learn more"," ",c.createElement(qe.d,{component:"a",target:"_blank",href:"https://docs.gitbook.com/account/export"},"here"),".")},c.createElement(p.b,{onClick:async()=>{a(!0);try{await l(n,t)}finally{a(!1)}},kind:"danger"},r?c.createElement(kt.b,null):"Export"))}function Rt(e){const{space:t,owner:n,opened:r,onToggle:a}=e;return c.createElement(yt.b,{size:"small",onClick:r?null:a},c.createElement(yt.b.Header,null,c.createElement(yt.b.Header.Left,null,c.createElement(yt.b.Header.Title,null,"Danger Zone"))),r&&c.createElement(yt.b.Body,null,c.createElement(l.b,{styles:[l.b.MARGIN.S200Bottom]},c.createElement(Ct,{space:t})),c.createElement(yt.b.Separator,null),c.createElement(wt,{owner:n,space:t})))}function Lt(e){const[t,n]=c.useState(null),r=(0,mt.b)(),a=(0,y.b)(),o=e=>{n(t=>t===e?null:e)};return c.createElement(l.b,null,c.createElement(lt,{text:"Advanced"}),c.createElement(Et,{owner:r,space:a,opened:"basename"===t,onToggle:()=>o("basename")}),c.createElement(ht,{owner:r,space:a,opened:"customdomain"===t,onToggle:()=>o("customdomain")}),c.createElement(Rt,{owner:r,space:a,opened:"danger"===t,onToggle:()=>o("danger")}))}var xt=n(5044),Tt=n(75057);const At=i.StyleSheet.create({drawerHeader:{position:"relative",display:"flex",flexDirection:"row",paddingTop:r.b.S200,paddingBottom:r.b.S200,height:Tt.b.HEADER_DESKTOP_HEIGHT,":after":{content:'" "',position:"absolute",bottom:0,left:0,right:r.b.S200,height:1,background:w.b.WHITE_OP_10}},spaceSummary:{flex:1,overflow:"hidden",whiteSpace:"nowrap"},ownerTitle:{overflow:"hidden",textOverflow:"ellipsis"},spaceNameWrapper:{display:"flex",alignItems:"center"},spaceName:{overflow:"hidden",textOverflow:"ellipsis"},spacePrivateIcon:{fontSize:Z.b.SIZE_ICON_SMALL,marginRight:r.b.S100},closeButton:{cursor:"pointer",color:w.b.GREY_BASE,padding:r.b.S200,"&:hover":{color:w.b.WHITE}}});function Ot(e){const{controlsCenter:t}=e,n=(0,mt.b)(),r=(0,y.b)();return c.createElement(l.b,{styles:[At.drawerHeader]},c.createElement(l.b,{styles:[At.spaceSummary]},c.createElement(l.b,{styles:[At.ownerTitle]},c.createElement(C.b.UIH400,{styles:[C.b.COLOR.white]},n.title)),c.createElement(l.b,{styles:[At.spaceNameWrapper]},r.isPrivate&&c.createElement(l.b,{styles:[At.spacePrivateIcon,de.b.tooltipped,de.b.right],"aria-label":"Private"},c.createElement(xt.b,null)),c.createElement(l.b,{styles:[At.spaceName]},c.createElement(C.b.TextH200,null,r.name)))),c.createElement(l.b,{styles:[At.closeButton],onClick:()=>{t.close()}},c.createElement(nt.b,{size:"medium"})))}var Ht=n(23221),Bt=n(94455),Pt=n(42615);function Gt(e){const{owner:t,space:n,opened:r,onToggle:a}=e,{updateFont:o}=(0,vt.i)(),[i,s]=(0,Bt.a)(t,"feature/customization",{spaceID:n.uid}),m=n.font?Ht.Z.find(e=>e.id===n.font).displayName:Ht.Z[0].displayName;return c.createElement(yt.b,{size:"small",onClick:r?null:a},c.createElement(yt.b.Header,null,c.createElement(yt.b.Header.Left,null,c.createElement(yt.b.Header.Title,null,"Font")),!r&&c.createElement(yt.b.Header.Right,null,c.createElement(yt.b.Header.Hint,null,m))),r&&c.createElement(yt.b.Body,null,c.createElement(pt.b.Group,{title:"Family",styles:[l.b.MARGIN.none],badge:i&&c.createElement(Pt.z,{onClick:i,method:s})},c.createElement(pt.b.Select,{value:n.font||"Roboto",onChange:async e=>{const r="Default"===e.currentTarget.value?null:e.currentTarget.value;n.font!==r&&(i?i():o(t,n,r))}},Ht.Z.map(e=>c.createElement("option",{key:e.id,value:e.id},e.displayName))),c.createElement(pt.b.Hint,null,"Missing a font ?"," ",c.createElement(qe.d,{target:"_blank",href:"https://gitbook.canny.io/fonts"},"Suggest one.")))))}n(23157);var _t=n(20096),zt=n(35369),Nt=n(23363),Mt=n.n(Nt);function Ut(){return(Ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const jt=function(e){return s().createElement(P.b,Ut({},{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 6 10",stroke:"none",fill:"currentColor"},e),s().createElement("g",null,s().createElement("path",{d:"M1 2a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm4-8a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"})))};var Ft=n(85702),Yt=n(31976),qt=n(90937);n(41817);const Wt=Symbol("space-link");var Kt=n(62002),Xt=n(48224),Vt=n(60412),Zt=n(39369),Qt=n(84876),$t=n(33898),Jt=n(83444),en=n.n(Jt),tn=n(45374);function nn(e){const{completion:t,highlighted:n,onPick:r}=e,a=t instanceof Kt.b?c.createElement(Vt.b,null):c.createElement(Xt.b,null);return c.createElement($t.b.Item,{icon:a,active:!!n,onMouseDown:()=>{r&&r(t)}},t.title)}const rn=i.StyleSheet.create({inputContainer:{position:"relative",width:"100%",marginRight:10},inputIcon:{padding:10}});function an(e){const{link:t,onChange:n}=e,r=(0,y.b)(),[a,l]=s().useState(!1),[o,i]=s().useState(0);return(0,u.i)({revision:me.b.queryByID({spaceID:r.uid,revisionID:r.primaryRevision})},e=>{let{revision:r}=e;const c=e=>{i(0),n(t.updateHref(e.target.value))},m=e=>{i(0),l(!1),n((e instanceof Kt.b?t.updatePageID(e.uid):t.updateHref(e.uid)).updateTitle(t.title||e.title))},u=r.primaryVersion.page.toFlatArray().filter(e=>e.isDocument),d=t.href||r.primaryVersion.page.getByID(t.pageID)&&r.primaryVersion.page.getByID(t.pageID).title||"";return s().createElement(Zt.b,{items:u,fuseConfig:tn.b.TREEPAGE,defaultAllItems:!1,query:d},e=>{let n=[];en()(d)&&(n=[{uid:d,title:d}]);const r=e.slice(0,3).concat(n);return s().createElement(ne.b.Relative,{opened:Boolean(a&&d&&r.length>0),wrapper:re.b.Container,anchor:e=>{let{ref:n}=e;return s().createElement(pt.b.Input,{ref:n,styles:[rn.inputContainer],value:d,placeholder:"URL or Page",onFocus:()=>l(!0),onBlur:()=>l(!1),onKeyDown:Qt.b.onKeyDown({completions:r,cursor:o,onPick:m,onCursor:e=>i(e)}),onChange:c},s().createElement(pt.b.InputAddOn,{prefix:!0},t.href?s().createElement(Xt.b,null):s().createElement(Vt.b,null)))}},s().createElement(re.b,{autoPosition:!0,align:"middle"},s().createElement($t.b,null,s().createElement(Qt.b,{completions:r,onPick:m,keys:e=>{let{uid:t}=e;return t},cursor:o,component:nn}))))})})}function ln(e){const{link:t,index:n,onDrop:r,onChange:a}=e,o={id:t.id,type:Wt,index:n},[i,c,m]=qt.useDrag({item:o}),[{hovered:u},d]=qt.useDrop({accept:Wt,drop:(e,t)=>{if(!t.didDrop())return r(e.index,n),{}},canDrop:(e,t)=>{const r=e.index<n?n-1:n;return e.index!==r},collect:e=>({hovered:e.isOver()&&e.canDrop()})});return s().createElement(l.b,{styles:[on.sortableLinkWrapper]},s().createElement(l.b,{ref:m,styles:[on.sortableLink]},s().createElement(l.b,{ref:c,styles:[on.sortableLinkGrabber]},s().createElement(jt,{size:"small"})),s().createElement(l.b,{styles:[on.sortableLinkInputs]},s().createElement(l.b,{styles:[on.sortableLinkTitle]},s().createElement(pt.b.Input,{value:t.title,onChange:e=>{a(t.updateTitle(e.currentTarget.value))},placeholder:"Title"})),s().createElement(l.b,{styles:[on.sortableLinkHref]},s().createElement(an,{link:t,onChange:a}))),s().createElement(Ft.b,{tabIndex:-1,styles:[on.sortableLinkDelete,!t.title&&!t.href&&!t.pageID&&on.sortableLinkDeleteDisabled],onPress:()=>{a(new _t.b)}},s().createElement(V.b,null))),s().createElement(l.b,{ref:d,styles:[on.droppableInsertLine,u&&on.insertLineHovered]}))}const on=i.StyleSheet.create({sortableLinkWrapper:{position:"relative",paddingBottom:D.b.PADDING_NORMAL/2,paddingTop:D.b.PADDING_NORMAL/2},sortableLink:{position:"relative",display:"flex",alignItems:"baseline",transform:"translateX(0)",zIndex:2,":last-child":{margin:0},["@media "+Yt.b.TABLET]:{alignItems:"center"}},sortableLinkInputs:{display:"flex",flex:1,flexDirection:"column",padding:"0 "+D.b.PADDING_SMALL+"px",["@media "+Yt.b.TABLET]:{flexDirection:"row"}},sortableLinkTitle:{["@media "+Yt.b.TABLET]:{flex:1}},sortableLinkHref:{position:"relative",marginTop:D.b.PADDING_SMALL,["@media "+Yt.b.TABLET]:{marginTop:0,marginLeft:D.b.PADDING_SMALL,flex:1}},sortableLinkDelete:{cursor:"pointer"},sortableLinkDeleteDisabled:{pointerEvents:"none",visibility:"hidden"},sortableLinkGrabber:{cursor:"grab",color:w.b.GREY_DARK},droppableInsertLine:{position:"absolute",height:D.b.PADDING_NORMAL,width:"100%",top:-D.b.PADDING_NORMAL/2,zIndex:1,":after":{content:'" "',height:2,position:"absolute",left:0,right:0,top:(D.b.PADDING_NORMAL-2)/2}},insertLineHovered:{":after":{background:w.b.BLUE_BASE}}});function cn(e){const{links:t,onChange:n}=e,r=(e,r)=>{const a=t.get(e);if(!a)throw new Error("Could not find space link at previous index "+e);const l=e<r?r-1:r;n(t.delete(e).insert(l,a))};return s().createElement(l.b,null,t.map((e,a)=>s().createElement(ln,{key:a,index:a,link:e,onDrop:r,onChange:e=>((e,r)=>{n(t.set(e,r))})(a,e)})))}function sn(e){const{space:t,opened:n,toggle:r}=e,a=(0,dt.z)(),[l,o,i]=pt.b.useFormState(t.links.concat((0,zt.List)(Array.from({length:bt.b.LINKS_LIMIT-t.links.size}).map(()=>new _t.b))),(e,t)=>e.some((e,n)=>!e.equals(t.get(n))));return c.createElement(yt.b,{onClick:n?null:()=>{"none"!==t.headerTheme?r("header"):r("theme")},size:"small"},c.createElement(yt.b.Header,null,c.createElement(yt.b.Header.Left,null,c.createElement(yt.b.Header.Title,null,"Header")),"none"===t.headerTheme&&c.createElement(yt.b.Header.Right,null,c.createElement(yt.b.Header.Hint,null,"Please select a header theme first to add links"))),n&&"none"!==t.headerTheme&&c.createElement(c.Fragment,null,c.createElement(yt.b.Body,null,c.createElement(cn,{links:l,onChange:o})),i&&c.createElement(yt.b.Footer,null,c.createElement(yt.b.Footer.Controls,null,c.createElement(p.b,{kind:"primary",onClick:()=>{const e=l.filter(e=>e.title&&(e.pageID||e.href)).map(e=>e.href&&Mt()(e.href)&&!e.href.startsWith("http")?e.merge({href:"https://"+e.href}):e).filter(e=>e.isValid);a.database.commit(t.merge({links:e}).toLinksUpdate())}},"Save")))))}var mn=n(39293),un=n(8229),dn=n(27433),bn=n(4911),pn=n(56427);const yn=i.StyleSheet.create({logoContainer:{width:100}});function gn(e){const{space:t,owner:n}=e,[r,a]=c.useState(Boolean(t.fullLogoURL)),[o,i]=c.useState(!1),{uploadFullLogo:s}=(0,vt.i)(),[m,u]=(0,Bt.a)(n,"feature/customization",{spaceID:t.uid}),d=Boolean(r||t.fullLogoURL);return c.createElement(l.b,{styles:[l.b.MARGIN.S300Top]},c.createElement(pt.b.SwitchField,{title:"Use a full logo in the header",checked:d,onChange:()=>{r?(t.fullLogoURL&&s(n,t,null),a(!1)):a(!0)}}),d&&c.createElement(bn.t,{preview:()=>c.createElement(l.b,{styles:[yn.logoContainer]},o?c.createElement(l.b,{styles:[l.b.PADDING.S100Vertical,l.b.PADDING.S400Horizontal]},c.createElement(kt.b,{size:"medium"})):c.createElement(pn.i,{src:t.fullLogoURL})),styles:[l.b.MARGIN.none,l.b.MARGIN.S200Top],onFile:async e=>{if(m)m();else{i(!0);try{await s(n,t,e)}finally{i(!1)}}}},c.createElement(pt.b.Hint,null,u&&c.createElement(Pt.z,{onClick:m,method:u,styles:[l.b.MARGIN.S100Right]}),"This logo appears on the left side of the header and replaces the square logo and the title")))}var En=n(90343);function fn(){return(fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const hn=i.StyleSheet.create({container:{flex:1,marginBottom:0}});function vn(e){const{space:t}=e,n=(0,dt.z)(),r=t.name.length===bt.b.NAME_LIMIT,a=c.useRef(null),l=(0,En.useDebouncedInput)({value:t.name,onChange:e=>{e!==t.name&&n.database.updateDocument(t.query(),{name:e})},ref:a});return c.createElement(pt.b.Group,{title:"Title",styles:[hn.container]},c.createElement(pt.b.Input,fn({},l,{placeholder:t.name,hasError:r,maxLength:bt.b.NAME_LIMIT})),r&&c.createElement(pt.b.Hint,{styles:[C.b.COLOR.redBase]},"Title should not exceed ",bt.b.NAME_LIMIT," characters."))}const Sn=i.StyleSheet.create({container:{display:"flex"},preview:{height:r.b.S600,width:r.b.S600,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:D.b.RADIUS_NORMAL,border:"1px solid transparent",marginRight:r.b.S100,background:w.b.BLUE_DARKEST}});function In(e){const{space:t,owner:n,opened:r,onToggle:a}=e,[o,i]=c.useState(!1),[s,m]=c.useState(!1),[u,d]=c.useState(t.emoji),[b,p]=c.useState(t.logoURL),[y,g]=c.useState(null),E=dn.wr.useIsLoading(),{uploadLogo:f,updateEmoji:h,updateLogo:v}=(0,vt.i)(),S=!!t.logoURL&&mn.o.isSpaceUploadURL(t.logoURL);c.useEffect(()=>{!1===S&&(m(!1),p(t.logoURL))},[S]);return c.createElement(yt.b,{size:"small",onClick:r?null:a},c.createElement(yt.b.Header,null,c.createElement(yt.b.Header.Left,null,c.createElement(yt.b.Header.Title,null,"Logo & Title"))),r&&c.createElement(yt.b.Body,null,c.createElement(l.b,{styles:[Sn.container]},E?c.createElement(wn,null):c.createElement(un.z,{space:t,owner:n,onPick:e=>{d(e),h(n,t,e)},onFile:async e=>{i(!0),m(!0);try{await f(n,t,e),g(null)}catch(r){g(new Error("Invalid file, or file too large")),m(!1)}finally{i(!1)}},onSwitchToEmojiTab:()=>{h(n,t,t.emoji||u||"2728")},onSwitchToLogoTab:()=>{v(n,t,b)},error:y,loading:o,isTabLocked:s}),c.createElement(vn,{space:t})),c.createElement(gn,{space:t,owner:n})))}function wn(e){return c.createElement(l.b,{styles:[Sn.preview]},c.createElement(kt.b,{size:"small"}))}function Dn(e){const{owner:t,space:n,opened:r,onToggle:a}=e,l=(0,dt.z)();return c.createElement(yt.b,{size:"small",onClick:r?null:a},c.createElement(yt.b.Header,null,c.createElement(yt.b.Header.Left,null,c.createElement(yt.b.Header.Title,null,"Pages"))),r&&c.createElement(yt.b.Body,null,c.createElement(pt.b.SwitchField,{title:"Page Rating",hint:"Gather readers feedback on the quality of your content.",checked:n.hasPageRating,onChange:async e=>{await l.database.updateDocument(n.query(),{hasPageRating:e}),l.analytics.trackTogglePageRating(t,n,e)}})))}const kn=i.StyleSheet.create({thumbnail:{width:70,height:60,display:"flex",flexDirection:"column",marginBottom:r.b.S100,cursor:"pointer",borderRadius:2,overflow:"hidden",position:"relative"},thumbnailDisabled:{opacity:.5},header:{position:"relative",zIndex:1,height:"40%",display:"flex",justifyContent:"flex-start",borderBottom:"1px solid "+w.b.GREY_LIGHTER},main:{display:"flex",height:"100%"},toc:{background:w.b.GREY_LIGHTER,width:"50%",paddingLeft:3,marginTop:-3,position:"relative",zIndex:0},page:{background:w.b.WHITE,width:"65%"},placeholder:{display:"inline-block",width:9,height:2,margin:"0 1px",background:w.b.BLACK},placeholdersWrapper:{display:"flex",alignItems:"center",marginLeft:4,marginRight:r.b.S100},checkboxContainer:{display:"flex",justifyContent:"flex-start"},inputHintColor:{color:w.b.GREY_BASE}});function Cn(e){const{theme:t,primaryColor:n,disabled:r,active:a,onChange:o}=e;return c.createElement(l.b,{onClick:()=>o(t)},c.createElement(Rn,{theme:t,primaryColor:n,disabled:r&&!a}),c.createElement(l.b,{styles:kn.checkboxContainer},c.createElement(pt.b.Checkbox,{checked:a}),c.createElement(C.b.TextH200,{styles:[l.b.MARGIN.S100Left,kn.inputHintColor]},t.charAt(0).toUpperCase().concat(t.slice(1,t.length)))))}function Rn(e){const{theme:t,disabled:n,primaryColor:r}=e,o={none:"transparent",light:w.b.WHITE,bold:r,dark:w.b.BLACK}[t],s="none"!==t,m={background:a.b.invertColor(o)},u="light"===t||"none"===t?{background:r}:{background:a.b.invertColor(o,.7)};return c.createElement(l.b,{styles:[kn.thumbnail,n&&kn.thumbnailDisabled]},s&&c.createElement(l.b,{styles:[kn.header],style:{background:o}},c.createElement(l.b,{styles:[kn.placeholdersWrapper]},c.createElement("span",{className:(0,i.css)([kn.placeholder]),style:m}),c.createElement("span",{className:(0,i.css)([kn.placeholder]),style:m})),c.createElement(l.b,{styles:[kn.placeholdersWrapper]},c.createElement("span",{className:(0,i.css)([kn.placeholder]),style:u}),c.createElement("span",{className:(0,i.css)([kn.placeholder]),style:u}))),c.createElement(l.b,{styles:[kn.main]},c.createElement("span",{className:(0,i.css)([kn.toc])},!s&&c.createElement(c.Fragment,null,c.createElement("span",{className:(0,i.css)([kn.placeholder])}),c.createElement("span",{className:(0,i.css)([kn.placeholder])}))),c.createElement("span",{className:(0,i.css)([kn.page])})))}const Ln=i.StyleSheet.create({flexContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"}}),xn=["none","light","bold","dark"];function Tn(e){const{space:t,owner:n,opened:r,onToggle:a}=e,{updateColorPrimary:o,updateHeaderTheme:i}=(0,vt.i)(),[s,m]=(0,Bt.a)(n,"feature/customization",{spaceID:t.uid}),u=e=>{s&&!An(e)?s():(i(n,t,e),window.scrollTo(0,0))};return c.createElement(yt.b,{size:"small",onClick:r?null:a},c.createElement(yt.b.Header,null,c.createElement(yt.b.Header.Left,null,c.createElement(yt.b.Header.Title,null,"Theme & Colors")),!r&&c.createElement(yt.b.Header.Right,null,c.createElement(yt.b.Header.Hint,null,t.headerTheme))),r&&c.createElement(yt.b.Body,null,c.createElement(pt.b.Group,{title:"Header theme",badge:s&&c.createElement(Pt.z,{onClick:s,method:m}),styles:l.b.MARGIN.S300Bottom},c.createElement(l.b,{styles:[l.b.MARGIN.S300Bottom,Ln.flexContainer]},xn.map(e=>c.createElement(Cn,{key:e,theme:e,disabled:Boolean(s&&!An(e)),primaryColor:t.colorPrimary,active:t.headerTheme===e,onChange:u})))),c.createElement(pt.b.Group,{title:"Color",styles:l.b.MARGIN.none},c.createElement(pt.b.ColorInput,{value:t.colorPrimary,onChange:e=>{o(n,t,e)}}),c.createElement(pt.b.Hint,null,"Used to style controls and user interface elements."))))}function An(e){return"none"===e||"light"===e}function On(e){const[t,n]=c.useState("logo"),r=(0,mt.b)(),a=(0,y.b)(),o=e=>{n(t=>t===e?null:e)};return c.createElement(l.b,null,c.createElement(lt,{text:"Customization"}),c.createElement(In,{owner:r,space:a,opened:"logo"===t,onToggle:()=>o("logo")}),c.createElement(Tn,{owner:r,space:a,opened:"theme"===t,onToggle:()=>o("theme")}),c.createElement(Gt,{owner:r,space:a,opened:"font"===t,onToggle:()=>o("font")}),c.createElement(Dn,{owner:r,space:a,opened:"pages"===t,onToggle:()=>o("pages")}),c.createElement(sn,{space:a,opened:"header"===t,toggle:o}))}function Hn(e){switch(e){case"drafts":return"No drafts yet. Drafts contain changes that have not been merged yet. Start editing to create a draft.";case"merged":return"No merged drafts yet.";case"archived":return"No archived drafts.";default:return"No drafts."}}var Bn=n(55386),Pn=n(81810),Gn=n.n(Pn);const _n=i.StyleSheet.create({draftsPlaceholder:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},draftsPlaceholderImage:{width:80,height:80},draftsPlaceholderText:{width:170,textAlign:"center",color:w.b.GREY_BASE}});function zn(e){const{description:t}=e;return c.createElement(l.b,{styles:[_n.draftsPlaceholder]},c.createElement(g.k,{styles:[_n.draftsPlaceholderImage],src:Gn()}),c.createElement(C.b.TextH200,{styles:[_n.draftsPlaceholderText,l.b.MARGIN.S100Top]},t))}var Nn=n(53828);const Mn=i.StyleSheet.create({draftItemContainer:{position:"relative"},draftTimeline:{position:"absolute",left:r.b.S300,background:w.b.GREY_BLUE_DARK,top:0,bottom:0,width:2,zIndex:1},draftItem:{position:"relative",marginRight:r.b.S100/2,paddingBottom:r.b.S100,zIndex:2},draftDateBadge:{backgroundColor:w.b.GREY_BLUE_DARKER,borderRadius:100,padding:"calc("+r.b.S100/2+"px) "+r.b.S100+"px",marginBottom:r.b.S100,width:"fit-content",color:w.b.GREY_BASE,textTransform:"uppercase",textAlign:"center",fontSize:10,fontWeight:Z.b.WEIGHT_BOLD,lineHeight:1},draftCard:{}});function Un(e){const{draft:t,isActive:n,isSameMonth:r,isSameYear:a,isLast:o,showTimeline:i}=e;return c.createElement(l.b,{styles:[Mn.draftItemContainer]},i&&!o&&c.createElement(l.b,{styles:[Mn.draftTimeline]}),c.createElement(l.b,{styles:[Mn.draftItem]},i&&!r&&c.createElement(jn,{date:t.closedAt,showYear:!a}),c.createElement(Nn.g,{draft:t,active:n,styles:[!i&&Mn.draftCard]})))}function jn(e){const{date:t,showYear:n=!1}=e,r=new Intl.DateTimeFormat("default",{month:"short"}),a=new Intl.DateTimeFormat("default",{year:"2-digit"}),o=r.format(t),i=a.format(t),s=""+o+(n?i:"");return c.createElement(l.b,{styles:[Mn.draftDateBadge]},s)}const Fn=i.StyleSheet.create({draftsListing:{display:"flex",flexDirection:"column",flex:1,height:"100%"},draftsScrollableList:{flex:1}}),Yn=(e,t)=>!e||!t||e.getFullYear()===t.getFullYear(),qn=(e,t)=>!e||!t||Yn(e,t)&&e.getMonth()===t.getMonth();function Wn(e){const{selectedDraftID:t,draftTabKey:n,showTimeline:r=!1}=e,a=(0,y.b)();return(0,u.i)({allDrafts:ce.b.queryBySpace(a.uid).setOptions({waitFetched:!1})},e=>{let{allDrafts:a}=e;const o=a.groupBy(e=>(0,Bn.k)(e)).get(n,(0,zt.OrderedMap)()).filter(e=>e.hasChanges||e.uid===t);if(!o||!o.count())return c.createElement(zn,{description:Hn(n)});const i=o.sortBy(e=>-e.lastModifiedAt.getTime());return c.createElement(l.b,{styles:[Fn.draftsListing]},c.createElement(Kn,{selectedDraftID:t,drafts:i,showTimeline:r}))})}function Kn(e){const{drafts:t,selectedDraftID:n,showTimeline:r}=e,{nodes:a}=t.valueSeq().reduce((e,a,l)=>({closedAt:a.closedAt,nodes:[...e.nodes,c.createElement(Un,{key:a.uid,draft:a,isActive:n===a.uid,isSameMonth:qn(a.closedAt,e.closedAt),isSameYear:Yn(a.closedAt,e.closedAt),isLast:l===t.count()-1,showTimeline:r})]}),{closedAt:null,nodes:[]});return c.createElement(o.b,{styles:[Fn.draftsScrollableList]},a)}var Xn=n(93093);const Vn=["drafts","merged","archived"],Zn=i.StyleSheet.create({draftTabs:{flex:1,marginBottom:0}});function Qn(e){const{tab:t}=e,n=(0,b.a)();return c.createElement(lt,{isShadowed:!0},c.createElement(Xn.e,{size:"small",styles:[Zn.draftTabs]},Vn.map(e=>c.createElement(Xn.e.Item,{key:e,active:t===e,onPress:()=>(e=>{n({toDraftTab:e})})(e)},e))))}const $n=i.StyleSheet.create({draftsDrawer:{display:"flex",flexDirection:"column",flex:1,height:"100%"}});function Jn(e){const{contentContext:t}=(0,m.p)(),{draftTabKey:n="drafts",draftID:r}=t;return c.createElement(l.b,{styles:[$n.draftsDrawer]},c.createElement(Qn,{tab:n}),c.createElement(Wn,{selectedDraftID:r,draftTabKey:n,showTimeline:"merged"===n}))}var er=n(48211),tr=n(61970);function nr(){const[e,t]=c.useState("pages"),n=(0,mt.b)(),r=(0,y.b)(),a=e=>{t(t=>t===e?null:e)};return c.createElement(l.b,null,c.createElement(lt,{text:"Analytics"}),c.createElement(er.x,{owner:n,space:r,opened:"pages"===e,onToggle:()=>a("pages")}),c.createElement(tr.a,{owner:n,space:r,opened:"search"===e,onToggle:()=>a("search")}))}var rr=n(45550),ar=n(95024),lr=n(69219),or=n(29327);const ir=i.StyleSheet.create({integrationTitle:{display:"flex",flexDirection:"row"},integrationLogo:{flex:"0 0 auto",background:w.b.WHITE,padding:2,width:lr.b.XS,height:lr.b.XS,borderRadius:D.b.RADIUS_SMALL,marginRight:r.b.S100}});function cr(e){const{logo:t,title:n}=e;return c.createElement(l.b,{styles:[ir.integrationTitle]},c.createElement(l.b,{styles:[ir.integrationLogo]},c.createElement(or.b,{src:t})),c.createElement(l.b,null,c.createElement(yt.b.Header.Title,null,n)))}var sr=n(63553),mr=n.n(sr),ur=n(83543);function dr(e){const{githubConfig:t,space:n,setError:r,error:a}=e,{updateEditOnGitHub:o}=(0,vt.i)(),{checkTokenSanity:i}=(0,ur.y)(),[s,m]=c.useState(Boolean(n.editOnGitHub));c.useEffect(()=>{(async()=>{if(t&&t.token)try{await i(t.token,t.repoID),r(null)}catch(e){r(e)}})()},[t&&t.token]);return c.createElement(l.b,null,a&&c.createElement(Ye.b,{kind:"danger",styles:[l.b.MARGIN.S200Bottom]},a.message," Re-authorize GitBook","'","s access to continue working in sync with GitHub."),c.createElement(pt.b.Group,null,c.createElement(C.b.TextH200,{styles:[C.b.COLOR.greyBase]},"This project is linked to the"," ",c.createElement(C.b,{styles:[C.b.COLOR.white,C.b.FORMAT.bold]},t.repoID)," ","repository. Commits on the repository will update the content of this project.")),c.createElement(pt.b.Group,null,c.createElement(pt.b.SwitchField,{title:"Display the button",hint:"Do you want to display the edit on GitHub button on your space?",checked:s,onChange:()=>{m(!s),o({space:n,githubConfig:t})},size:"small"})))}function br(e){const{owner:t,space:n,opened:r,onToggle:a}=e,l=(0,dt.z)(),{setupGitHub:o}=(0,ft.a)(),[i,s]=c.useState(null);return(0,u.i)({githubConfig:rr.b.queryBySpace(n.uid).setOptions({waitFetched:!1})},e=>{let{githubConfig:m}=e;const u=async()=>{m&&await l.database.commit(m.toRemoveUpdate(n.uid))},d=()=>{o(t.uid,n.uid)};return c.createElement(c.Fragment,null,c.createElement(yt.b,{size:"small",onClick:r?null:a},c.createElement(yt.b.Header,null,c.createElement(yt.b.Header.Left,null,c.createElement(cr,{title:"GitHub",logo:mr()})),c.createElement(yt.b.Header.Right,null,c.createElement(ar.b,{checked:Boolean(m),onChange:()=>{m?window.confirm("Do you really want to unlink from GitHub? The project will remain available on GitBook but changes made to the GitHub repository will not be imported anymore.")&&u():d()},size:"small"}))),r&&c.createElement(c.Fragment,null,c.createElement(yt.b.Body,null,m?c.createElement(dr,{space:n,githubConfig:m,error:i,setError:s}):c.createElement(C.b.TextH200,{styles:[C.b.COLOR.greyBase]},"Have your documentation always up-to-date by mirroring the content of your GitHub repository.")),m&&c.createElement(yt.b.Footer,null,c.createElement(yt.b.Footer.Controls,null,i?c.createElement(p.b,{kind:"secondary",size:"small",onClick:async()=>{m&&(await u(),d())}},"Re-configure GitHub"):c.createElement(p.b,{kind:"primary",onClick:d,size:"small"},"Edit configuration"))))))})}var pr=n(9579),yr=n.n(pr);function gr(e){const{space:t,opened:n,onToggle:r}=e,[a,o,i]=pt.b.useFormState(t.googleAnalyticsID||""),s=c.useRef(null),m=(0,dt.z)(),u=!a||/^ua-\d{4,9}-\d{1,4}$/i.test(a);const d=u&&i;return c.createElement(pt.b,{onSubmit:()=>{m.database.updateDocument(t.query(),{googleAnalyticsID:a})}},c.createElement(yt.b,{size:"small",onClick:n?null:r},c.createElement(yt.b.Header,null,c.createElement(yt.b.Header.Left,null,c.createElement(cr,{title:"Google Analytics",logo:yr()})),c.createElement(yt.b.Header.Right,null,c.createElement(ar.b,{checked:!!t.googleAnalyticsID,onChange:()=>{t.googleAnalyticsID?window.confirm("Do you really want to remove the Google Analytics integration? Traffic will no more be tracked through your Google Analytics account.")&&m.database.updateDocument(t.query(),{googleAnalyticsID:null}):s.current&&s.current.focus()},size:"small"}))),n&&c.createElement(c.Fragment,null,c.createElement(yt.b.Body,null,c.createElement(l.b,{styles:[l.b.MARGIN.S200Bottom]},c.createElement(C.b.TextH200,{styles:[C.b.COLOR.greyBase]},"Receive traffic insights directly in your Google Analytics dashboard.")),c.createElement(pt.b.Group,{error:u?null:'This tracking ID is not valid, it should look like "UA-123456789-1',styles:[l.b.MARGIN.none]},c.createElement(pt.b.Input,{ref:s,value:a,hasError:!u,onChange:e=>{const{value:t}=e.target;o(t)},placeholder:"UA-XXXXXXXXX-X"}),c.createElement(pt.b.Hint,null,'Enter your tracking ID. You can find it in your Google Analytics account, in the "Tracking Info/Tracking Code" section of the "Admin" page. ',c.createElement(qe.d,{target:"_blank",href:"https://docs.gitbook.com/integrations/google-analytics"},"Need help?")))),i&&c.createElement(yt.b.Footer,null,c.createElement(yt.b.Footer.Controls,null,c.createElement(p.b,{type:"submit",disabled:!d},"Save Changes"))))))}var Er=n(55136),fr=n.n(Er);function hr(e){const{space:t,opened:n,onToggle:r}=e,[a,o,i]=pt.b.useFormState(t.intercomID||""),s=c.useRef(null),m=(0,dt.z)(),u=a.length>0,d=i&&u;return c.createElement(pt.b,{onSubmit:()=>{d&&m.database.updateDocument(t.query(),{intercomID:a})}},c.createElement(yt.b,{size:"small",onClick:n?null:r},c.createElement(yt.b.Header,null,c.createElement(yt.b.Header.Left,null,c.createElement(cr,{title:"Intercom",logo:fr()})),c.createElement(yt.b.Header.Right,null,c.createElement(ar.b,{checked:!!t.intercomID,onChange:()=>{t.intercomID?window.confirm("Do you really want to remove the Intercom integration?")&&m.database.updateDocument(t.query(),{intercomID:null}):s.current&&s.current.focus()},size:"small"}))),n&&c.createElement(c.Fragment,null,c.createElement(yt.b.Body,null,c.createElement(l.b,{styles:[l.b.MARGIN.S200Bottom]},c.createElement(C.b.TextH200,{styles:[C.b.COLOR.greyBase]},"Add the Intercom chat widget to your documentation.")),c.createElement(pt.b.Group,{styles:[l.b.MARGIN.none]},c.createElement(pt.b.Input,{ref:s,value:a,onChange:e=>{o(e.target.value)},placeholder:"XXXXXXXX"}),c.createElement(pt.b.Hint,null,'Enter your application ID. You can find it in your Intercom account, under the "Installation" section of the "Settings" page. ',c.createElement(qe.d,{target:"_blank",href:"https://docs.gitbook.com/integrations/intercom"},"Need help?")))),i&&c.createElement(yt.b.Footer,null,c.createElement(yt.b.Footer.Controls,null,c.createElement(p.b,{type:"submit",disabled:!d},"Save Changes"))))))}var vr=n(13629);function Sr(e){const{channels:t}=e,n=(0,dt.z)();return c.createElement(l.b,null,t.map((e,r)=>{let{channel:a,integration:o}=e;return c.createElement(l.b,{styles:[r===t.length-1?null:l.b.MARGIN.S100Bottom]},c.createElement(pt.b.ButtonField,{key:a.channelID,title:o.teamName,hint:a.channelName},c.createElement(p.b,{kind:"link",icon:c.createElement(V.b,null),onClick:()=>{1===o.channels.size?n.database.commit(o.toRemoveUpdate()):n.database.commit(o.removeChannel(a).toCreateUpdate())}})))}))}var Ir=n(39076),wr=n.n(Ir);function Dr(e){const{owner:t,space:n,opened:r,onToggle:a}=e,l=(0,ut.v)(),o=(0,dt.z)(),i=l.slack.redirect_uri+"?space="+n.uid,s="https://slack.com/oauth/authorize?&client_id="+l.slack.client_id+"&scope=commands,incoming-webhook&redirect_uri="+encodeURIComponent(i),m=()=>{!function(e,t,n,r){const a=window.screen.width/2-n/2,l=window.screen.height/2-r/2;window.open(e,t,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+n+", height="+r+", top="+l+", left="+a)}(s,"Setup Slack",550,550),o.analytics.trackSetupSlack(t,n)};return(0,u.i)({integrations:vr.b.queryBySpace(n.uid).setOptions({waitFetched:!1})},e=>{let{integrations:t}=e;const n=t.size>0,l=function(e){return e.reduce((e,t)=>e.concat(t.channels.valueSeq().toArray().map(e=>({channel:e,integration:t}))),[])}(t);return c.createElement(yt.b,{size:"small",onClick:r?null:a},c.createElement(yt.b.Header,null,c.createElement(yt.b.Header.Left,null,c.createElement(cr,{title:"Slack",logo:wr()})),c.createElement(yt.b.Header.Right,null,c.createElement(ar.b,{checked:n,onChange:()=>{n?window.confirm("Do you really want to unlink all Slack channels?")&&o.database.commit(t.reduce((e,t)=>e?e.merge(t.toRemoveUpdate()):t.toRemoveUpdate(),null)):m()},size:"small"}))),r&&(n?c.createElement(c.Fragment,null,c.createElement(yt.b.Body,null,c.createElement(Sr,{channels:l})),c.createElement(yt.b.Footer,null,c.createElement(yt.b.Footer.Controls,null,c.createElement(p.b,{icon:c.createElement(I.b,null),onClick:m},"Add new channel")))):c.createElement(yt.b.Body,null,c.createElement(C.b.TextH200,{styles:[C.b.COLOR.greyBase]},"Search your documentation directly from Slack with a special /gitbook command."))))})}function kr(e){const[t,n]=c.useState(null),r=(0,mt.b)(),a=(0,y.b)(),o=e=>{n(t=>t===e?null:e)};return c.createElement(l.b,null,c.createElement(lt,{text:"Integrations"}),c.createElement(br,{owner:r,space:a,opened:"github"===t,onToggle:()=>o("github")}),c.createElement(Dr,{owner:r,space:a,opened:"slack"===t,onToggle:()=>o("slack")}),c.createElement(gr,{space:a,opened:"ga"===t,onToggle:()=>o("ga")}),c.createElement(hr,{space:a,opened:"intercom"===t,onToggle:()=>o("intercom")}),c.createElement(l.b,null,c.createElement(C.b.TextH200,{styles:[C.b.COLOR.greyBase]},"Missing an integration ?"," ",c.createElement(qe.d,{href:"https://gitbook.canny.io/integrations",target:"_blank"},"Suggest one."))))}var Cr=n(4485),Rr=n(44706),Lr=n(81385);function xr(e){const{onConfirm:t,onClose:n}=e;return c.createElement(je.g,{onClose:n},c.createElement(Fe.y,null,c.createElement(Fe.y.Header,null,c.createElement(Fe.y.Title,null,"Disable shareable link")),c.createElement(Fe.y.Body,null,c.createElement(C.b.TextH400,{styles:[C.b.COLOR.greyBase]},"Are you sure you want to revoke the current link? This will prevent all non-members of your organization to access your space.")),c.createElement(Fe.y.Footer,null,c.createElement(p.b,{kind:"cancel",onClick:n},"Cancel"),c.createElement(p.b,{kind:"primary",onClick:t},"Revoke"))))}function Tr(e){const{onConfirm:t,onClose:n}=e;return c.createElement(je.g,{onClose:n},c.createElement(Fe.y,null,c.createElement(Fe.y.Header,null,c.createElement(Fe.y.Title,null,"Generate a new link")),c.createElement(Fe.y.Body,null,c.createElement(C.b.TextH400,{styles:[C.b.COLOR.greyBase]},"Are you sure you want to generate a new link? This will revoke the current one and make it unaccessible.")),c.createElement(Fe.y.Footer,null,c.createElement(p.b,{kind:"cancel",onClick:n},"Cancel"),c.createElement(p.b,{kind:"primary",onClick:t},"Generate"))))}function Ar(e){const{owner:t,space:n,opened:r,canAdmin:a,onToggle:o}=e,i=(0,ut.v)().domains.spaces,[s,m]=c.useState(!1),[u,d]=c.useState(!1),{updateSecretToken:b}=(0,vt.i)(),[p,y]=(0,Bt.a)(t,"feature/shareable-link",{spaceID:n.uid}),g="private"===n.visibility,E=!!n.secretToken,f=n.getURL(t,i),h=()=>{m(!1),d(!1)};return c.createElement(c.Fragment,null,c.createElement(yt.b,{size:"small",onClick:r?null:o},c.createElement(yt.b.Header,null,c.createElement(yt.b.Header.Left,null,c.createElement(yt.b.Header.Title,null,"Shareable Link",y&&g&&c.createElement(Pt.z,{onClick:p,method:y,styles:[l.b.MARGIN.S100Left]}))),g&&a&&c.createElement(yt.b.Header.Right,null,c.createElement(ar.b,{checked:E,onChange:e=>{if(e){if(p)return void p();b(t,n)}else m(!0)},size:"small"}))),r&&c.createElement(Or,{isPrivate:g,hasShareableLink:E,spaceURL:f,canAdmin:a,onResetLink:()=>{d(!0)}})),u&&c.createElement(Tr,{onClose:h,onConfirm:()=>{h(),b(t,n)}}),s&&c.createElement(xr,{onClose:h,onConfirm:()=>{h(),b(t,n,!0)}}))}function Or(e){const{isPrivate:t,hasShareableLink:n,spaceURL:r,canAdmin:a,onResetLink:o}=e,i=n||!t;return c.createElement(c.Fragment,null,c.createElement(yt.b.Body,null,t?c.createElement(l.b,null,c.createElement(C.b.TextH200,{styles:C.b.COLOR.greyBase},"This space is private, but"," ",a?"you":"an admin"," can create a"," ",c.createElement(C.b,{styles:[C.b.COLOR.white,C.b.FORMAT.bold]},"read-only")," ","link to share content with your colleagues and customers. You can revoke it or generate a new link at any time.")):c.createElement(l.b,null,c.createElement(C.b.TextH200,{styles:C.b.COLOR.greyBase},"This space is public. Anyone with this URL can read it but not edit it.")),i&&c.createElement(l.b,{styles:[l.b.MARGIN.S200Top]},c.createElement(pt.b.InputCopy,{value:r,size:"small"},c.createElement(pt.b.InputAddOn,{prefix:!0},c.createElement(Xt.b,null)))),a&&c.createElement(l.b,{styles:[l.b.MARGIN.S200Top]},c.createElement(C.b.TextH200,{styles:C.b.COLOR.greyBase},n?c.createElement(c.Fragment,null,"You can"," ",c.createElement(qe.d,{onClick:o},"generate")," ","a new link. This will also revoke the current one."):c.createElement(c.Fragment,null,"You can configure this URL in the"," ",c.createElement(Lr.s,{toSettings:"advanced"},"domain settings"),".")))),i&&c.createElement(yt.b.Footer,null,c.createElement(yt.b.Footer.Controls,null,c.createElement(p.b,{kind:"primary",href:r,target:"_blank",size:"small",component:"a",icon:c.createElement(Rr.b,null)},"Open"))))}function Hr(e){const{space:t,owner:n,opened:r,onToggle:a}=e,{updateUnlisted:o}=(0,vt.i)();return c.createElement(yt.b,{size:"small",onClick:r?null:a},c.createElement(yt.b.Header,null,c.createElement(yt.b.Header.Left,null,c.createElement(yt.b.Header.Title,null,"Unlisted")),c.createElement(yt.b.Header.Right,null,c.createElement(ar.b,{checked:t.isUnlisted,onChange:()=>{o(n,t,!t.isUnlisted)},size:"small"}))),r&&c.createElement(yt.b.Body,null,c.createElement(l.b,null,c.createElement(C.b.TextH200,{styles:C.b.COLOR.greyBase},"The content will only be visible to those with the link. It won’t be indexed on Google."))))}var Br=n(54457);const Pr={public:{confirm:"PUBLIC",title:"Make this space public",desc:"Make this project visible to anyone, including non organization members and visitors."},private:{confirm:"PRIVATE",title:"Make this space private",desc:"Make this project only accessible to your organization members, preventing access to any other users."}};function Gr(e){const{visibility:t,onClose:n,onConfirm:r}=e,[a,l]=c.useState(""),o=Pr[t];return c.createElement(je.g,{onClose:n,closeOnEsc:!0,closeOnOutsideClick:!0},c.createElement(Fe.y,null,c.createElement(Fe.y.Header,null,c.createElement(Fe.y.Title,null,o.title)),c.createElement(Fe.y.Body,null,c.createElement(pt.b.Group,null,c.createElement(C.b,{styles:[C.b.COLOR.greyBase]},o.desc)),c.createElement(pt.b.Group,{title:'Type in "'+o.confirm+'" to confirm.'},c.createElement(pt.b.Input,{onChange:e=>{l(e.target.value)},value:a}))),c.createElement(Fe.y.Footer,null,c.createElement(p.b,{kind:"cancel",onClick:n},"Cancel"),c.createElement(p.b,{disabled:a!==o.confirm,onClick:()=>{o.confirm===a&&r()}},"Yes, I'm sure"))))}function _r(e){const{space:t,owner:n,opened:r,onToggle:a}=e,o="private"===t.visibility?"public":"private",{updateVisibility:i}=(0,vt.i)(),[s,m]=c.useState(!1),[u]=(0,Bt.a)(n,"space/visibility/"+o,{spaceID:t.uid}),d=e=>{t.visibility!==e&&(u?u():m(!0))};return c.createElement(c.Fragment,null,c.createElement(yt.b,{size:"small",onClick:r?null:a},c.createElement(yt.b.Header,null,c.createElement(yt.b.Header.Left,null,c.createElement(yt.b.Header.Title,null,"Visibility")),!r&&c.createElement(yt.b.Header.Right,null,c.createElement(yt.b.Header.Hint,null,"public"===t.visibility?"Public":"Private"))),r&&c.createElement(yt.b.Body,null,c.createElement(l.b,{styles:l.b.MARGIN.S300Bottom},c.createElement(pt.b.CheckboxField,{title:"Public",icon:c.createElement(Br.b,null),hint:"Your public content will be available publicly to anyone.",checked:"public"===t.visibility,onChange:()=>d("public")})),c.createElement(l.b,null,c.createElement(pt.b.CheckboxField,{title:"Private",icon:c.createElement(xt.b,null),hint:"The content will only be visible to your team and yourself.",checked:"private"===t.visibility,onChange:()=>d("private")})))),s&&c.createElement(Gr,{visibility:o,onClose:()=>{m(!1)},onConfirm:()=>{m(!1),i(n,t,o)}}))}function zr(e){const[t,n]=c.useState("link"),r=(0,mt.b)(),a=(0,y.b)(),{canAdmin:o}=(0,Cr.z)(),i=e=>{n(t=>t===e?null:e)};return c.createElement(l.b,null,c.createElement(lt,{text:"Share"}),c.createElement(_r,{owner:r,space:a,opened:"visibility"===t,onToggle:()=>i("visibility")}),c.createElement(Ar,{owner:r,space:a,canAdmin:o,opened:"link"===t,onToggle:()=>i("link")}),"public"===a.visibility&&o?c.createElement(Hr,{owner:r,space:a,opened:"unlisted"===t,onToggle:()=>i("unlisted")}):null)}var Nr=n(77562),Mr=n(34690),Ur=n(39694);const jr=function(e){const{team:t,space:n,org:r,members:a,toggleable:o=!0}=e,{updateSpacePermissions:i}=(0,vt.i)(),s=(0,It.EE)(),m=!(!1===(t?t.spacesPermission.get(n.uid):r.spacesPermission.get(n.uid)));return c.createElement(yt.b,{size:"small",onClick:()=>{s.push("/@"+r.baseDomain+"/teams"+(t?"/"+t.uid:""))}},c.createElement(yt.b.Header,null,c.createElement(yt.b.Header.Left,null,c.createElement(yt.b.Header.Title,null,t?t.name:"All members")),c.createElement(yt.b.Header.Right,null,c.createElement(H.b.List,{size:"xsmall",ownerIDs:a.map(e=>e.uid).valueSeq().toArray(),styles:[l.b.MARGIN.S100Right]}),o&&c.createElement(l.b,{onClick:e=>e.stopPropagation()},c.createElement(ar.b,{checked:m,onChange:()=>{i({org:r,team:t,value:!m,spaceID:n.uid})},size:"small"})))))};function Fr(e){const t=(0,mt.b)(),n=(0,y.b)();return c.createElement(l.b,null,c.createElement(lt,{text:"Teams"}),t.isOrg()&&c.createElement(Yr,{org:t,space:n}),c.createElement(Ur.b,{owner:t,space:n}))}function Yr(e){const{org:t,space:n}=e;return(0,u.i)({members:Nr.b.queryByOrg(t.uid).setOptions({waitFetched:!1}),teams:Mr.b.queryByOrg(t.uid)},e=>{let{members:r,teams:a}=e;return c.createElement(c.Fragment,null,c.createElement(jr,{space:n,org:t,members:r,toggleable:a.size>0}),a.valueSeq().map(e=>c.createElement(jr,{key:e.uid,space:n,org:t,team:e,members:r.filter(t=>t.teams.has(e.uid))})))})}n.d(t,{default:()=>Wr});const qr=i.StyleSheet.create({drawerContent:{flex:1,display:"flex",flexDirection:"column",minHeight:0},drawerContentHeader:{},drawerContentBody:{flex:1,paddingRight:r.b.S200}}),Wr=c.memo((function(e){const{controlsCenter:t}=e,{tab:n}=t;return c.createElement(a.b.Brand,null,c.createElement(l.b,{styles:[qr.drawerContent]},c.createElement(l.b,{styles:[qr.drawerContentHeader]},c.createElement(Ot,{controlsCenter:t})),c.createElement(o.b,{styles:[qr.drawerContentBody]},"content"===n&&c.createElement(Jn,null),"activity"===n&&c.createElement(st,null),"share"===n&&c.createElement(zr,null),"customization"===n&&c.createElement(On,null),"teams"===n&&c.createElement(Fr,null),"integrations"===n&&c.createElement(kr,null),"insights"===n&&c.createElement(nr,null),"advanced"===n&&c.createElement(Lt,null))))}))},48211:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});var r=n(88674),a=n.n(r),l=n(40684);const o=(0,l.bU)({chunkName:()=>"PagesPanel",isReady(e){return!!n.m[this.resolve(e)]},requireAsync:()=>Promise.all([n.e(499),n.e(38),n.e(639)]).then(n.bind(null,21809)),requireSync(e){const t=this.resolve(e);return n(t)},resolve(){return 21809}})},61970:(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var r=n(88674),a=n.n(r),l=n(40684);const o=(0,l.bU)({chunkName:()=>"SearchPanel",isReady(e){return!!n.m[this.resolve(e)]},requireAsync:()=>Promise.all([n.e(499),n.e(38),n.e(342)]).then(n.bind(null,9784)),requireSync(e){const t=this.resolve(e);return n(t)},resolve(){return 9784}})},4911:(e,t,n)=>{"use strict";n.d(t,{t:()=>g});n(66992),n(88674),n(33948);var r=n(41413),a=n(67294),l=n(80822),o=n(49027),i=n(95993),c=n(84361),s=n(90528),m=n(24925),u=n(17970),d=n(6970),b=n(14498);function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const y=r.StyleSheet.create({container:{display:"flex"},dropArea:{padding:0,marginBottom:0,height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},dropAreaContainer:{flex:1,marginLeft:l.b.S200},preview:{display:"block",padding:l.b.S200,background:o.b.GREY_LIGHTER,borderRadius:i.b.RADIUS_NORMAL},previewDark:{background:o.b.BLUE_DARKEST}});function g(e){const{maxSize:t=4194304,preview:n,onFile:r,children:l}=e,o=p(e,["maxSize","preview","onFile","children"]),i=d.b.useTheme(),[g,E]=a.useState(null);return a.createElement(b.b,o,a.createElement(s.b,{styles:[y.container]},a.createElement(s.b,{styles:[y.preview,"dark"===i&&y.previewDark]},n(g)),a.createElement(s.b,{styles:[y.dropAreaContainer]},a.createElement(c.r,{accept:["image/*"],onFiles:async e=>{const t=e[0];t&&(E(t),await r(t),E(null))},styles:[y.dropArea],maxSize:t},e=>a.createElement(s.b,null,a.createElement(m.b.TextH200,{styles:m.b.COLOR.greyBase},"Drop your file here"," ",a.createElement(u.d,{onClick:e},"or browse")))))),l)}},65497:(e,t,n)=>{"use strict";var r=n(67294),a=n(41413),l=n(95993),o=n(49027),i=n(87609),c=n(90528),s=n(6970),m=n(17961),u=n(80822),d=n(24925);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const y=a.StyleSheet.create({panelHeader:{display:"flex",alignItems:"center"},panelHeaderTitle:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},panelHeaderRight:{display:"flex",alignItems:"center"},panelHeaderLeft:{flex:1,overflow:"hidden"},panelHeaderHint:{color:o.b.GREY_BASE}}),g=a.StyleSheet.create({small:{padding:u.b.S200},medium:{padding:u.b.S300}});function E(e){const{styles:t,children:n}=e,a=p(e,["styles","children"]),l=m.b.useSize(["small","medium"]);return r.createElement(c.b,b({},a,{styles:[y.panelHeader,g[l],t]}),n)}E.Left=function(e){const{styles:t,children:n}=e;return r.createElement(c.b,{styles:[y.panelHeaderLeft,t]},n)},E.Title=function(e){const{styles:t,children:n}=e,a="small"===m.b.useSize(["small","medium"])?d.b.UIH300:d.b.UIH400;return r.createElement(c.b,{styles:[y.panelHeaderTitle,t]},r.createElement(a,null,n))},E.Hint=function(e){const{styles:t,children:n}=e;return r.createElement(c.b,{styles:[y.panelHeaderHint,t]},r.createElement(d.b.TextH200,null,n))},E.Right=function(e){const{styles:t,children:n}=e;return r.createElement(c.b,{styles:[y.panelHeaderRight,t]},n)};const f=E;function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const S=a.StyleSheet.create({panelControl:{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:o.b.GREY_BASE,width:40,height:40,":hover":{color:o.b.BLUE_BASE}}}),I=r.forwardRef((function(e,t){const{styles:n,children:a}=e,l=v(e,["styles","children"]);return r.createElement(c.b,h({ref:t},l,{styles:[S.panelControl,n]}),a)}));var w=n(62066);class D extends r.Component{render(){const{STYLES:e}=D,{isCollapsed:t,onClick:n,styles:a}=this.props;return r.createElement(I,{styles:[t&&e.panelToggleCollapsed,a],onClick:n,role:"button",tabIndex:0},r.createElement(w.b,null))}}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(D,"STYLES",a.StyleSheet.create({panelToggleCollapsed:{transform:"rotateZ(-90deg)"}}));const k=D;function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function R(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const L=a.StyleSheet.create({panelBody:{borderTop:"1px solid transparent",":first-child":{borderTop:"none"}}}),x=a.StyleSheet.create({light:{borderTopColor:o.b.GREY_LIGHTER},dark:{borderTopColor:o.b.BLUE_DARKEST}}),T=a.StyleSheet.create({small:{margin:"0px "+u.b.S200+"px",padding:u.b.S300+"px 0px"},medium:{margin:"0px "+u.b.S300+"px",padding:u.b.S300+"px 0px"}});const A=function(e){const{styles:t,children:n}=e,a=R(e,["styles","children"]),l=s.b.useTheme(),o=m.b.useSize(["small","medium"]);return r.createElement(c.b,C({},a,{styles:[L.panelBody,x[l],T[o],t]}),n)};var O=n(31976);const H=a.StyleSheet.create({panelFooter:{borderTop:"1px solid "+o.b.GREY_LIGHTER,["@media "+O.b.TABLET]:{textAlign:"left",display:"flex",alignItems:"center"}},panelFooterControls:{["@media "+O.b.TABLET]:{display:"flex",alignItems:"center",flexShrink:0,marginLeft:"auto",paddingLeft:u.b.S500}},panelFooterHint:{color:o.b.GREY_BASE,marginBottom:u.b.S100,["@media "+O.b.TABLET]:{flex:1,marginBottom:0}}}),B=a.StyleSheet.create({light:{borderTopColor:o.b.GREY_LIGHTER},dark:{borderTopColor:o.b.BLUE_DARKEST}}),P=a.StyleSheet.create({small:{margin:"0px "+u.b.S200+"px",padding:u.b.S200+"px 0px"},medium:{margin:"0px "+u.b.S300+"px",padding:u.b.S300+"px 0px"}});function G(e){const{styles:t,children:n}=e,a=s.b.useTheme(),l=m.b.useSize(["small","medium"]);return r.createElement(c.b,{styles:[H.panelFooter,P[l],B[a],t]},n)}G.Hint=function(e){const{styles:t,children:n}=e;return r.createElement(c.b,{styles:[H.panelFooterHint,t]},r.createElement(d.b.TextH200,null,n))},G.Controls=function(e){const{styles:t,children:n}=e;return r.createElement(c.b,{styles:[H.panelFooterControls,t]},n)};const _=G,z=a.StyleSheet.create({separator:{height:1,background:o.b.GREY_LIGHTER},separatorDark:{background:o.b.BLUE_DARKEST}}),N=a.StyleSheet.create({small:{marginBottom:u.b.S300},medium:{marginBottom:u.b.S400}});const M=function(e){const t=s.b.useTheme(),n=m.b.useSize(["small","medium"]);return r.createElement(c.b,{styles:[z.separator,N[n],"dark"===t&&z.separatorDark]})};function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function j(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const F=a.StyleSheet.create({panel:{borderRadius:l.b.RADIUS_NORMAL}}),Y=a.StyleSheet.create({light:{color:o.b.BLACK,backgroundColor:o.b.WHITE,border:"1px solid "+o.b.GREY_LIGHTER,boxShadow:l.b.SHADOW_HIGH},dark:{color:o.b.WHITE,backgroundColor:o.b.GREY_BLUE_DARKER}}),q=a.StyleSheet.create({light:{cursor:"pointer"},dark:{cursor:"pointer",transition:i.b.fastEaseOut("background"),":hover":{backgroundColor:o.b.GREY_BLUE_DARK}}}),W=a.StyleSheet.create({small:{borderRadius:l.b.RADIUS_NORMAL},medium:{borderRadius:l.b.RADIUS_LARGE}}),K=r.forwardRef((function(e,t){const{styles:n,children:a,size:l,onClick:o}=e,i=j(e,["styles","children","size","onClick"]),u=s.b.useTheme(),d=m.b.useSize(["small","medium"]),b=l||d;return r.createElement(m.b,{size:b},r.createElement(c.b,U({ref:t},i,{onClick:o,styles:["small"===b?c.b.MARGIN.S200Bottom:c.b.MARGIN.S300Bottom,F.panel,Y[u],o&&q[u],W[b],n]}),a))}));K.defaultProps={size:null,onClick:null},K.Header=f,K.Control=I,K.Toggle=k,K.Body=A,K.Footer=_,K.Separator=M;const X=K;n.d(t,{b:()=>V});const V=X},7159:(e,t,n)=>{"use strict";n.d(t,{b:()=>u});n(56977);var r=n(67294),a=n(41413),l=n(49027),o=n(16256);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=50,s=50;class m extends r.Component{getPathDescription(){const e=this.getPathRadius(),t=this.props.counterClockwise?1:0;return"\n      M "+c+","+s+"\n      m 0,-"+e+"\n      a "+e+","+e+" "+t+" 1 1 0,"+2*e+"\n      a "+e+","+e+" "+t+" 1 1 0,-"+2*e+"\n    "}getPathStyles(){const e=2*Math.PI*this.getPathRadius(),t=(100-Math.min(Math.max(this.props.percentage,0),100))/100*e;return{strokeDasharray:e+"px "+e+"px",strokeDashoffset:(this.props.counterClockwise?-t:t)+"px"}}getPathRadius(){return 50-this.props.strokeWidth/2}render(){const{STYLES:e}=m,{percentage:t,textForPercentage:n,strokeWidth:l}=this.props,o=this.getPathDescription(),i=n(t);return r.createElement("svg",{className:(0,a.css)(e.circularProgressbar),viewBox:"0 0 100 100"},r.createElement("path",{className:(0,a.css)(e.trail),d:o,strokeWidth:l,fillOpacity:0}),r.createElement("path",{className:(0,a.css)(e.path),d:o,strokeWidth:l,fillOpacity:0,style:Object.assign({},this.getPathStyles())}),i?r.createElement("text",{className:(0,a.css)(e.text),x:c,y:s},i):null)}}i(m,"defaultProps",{strokeWidth:5,counterClockwise:!1,textForPercentage:e=>e.toFixed(0)+"%"}),i(m,"STYLES",a.StyleSheet.create({circularProgressbar:{width:"100%",color:l.b.WHITE},path:{stroke:"currentColor",strokeLinecap:"round",transition:"stroke-dashoffset 0.5s ease 0s"},trail:{stroke:l.b.GREY_BLUE_DARK},text:{fill:"currentColor",fontSize:o.b.SIZE_MEDIUM_LARGE,dominantBaseline:"middle",textAnchor:"middle"}}));const u=m},81445:(e,t,n)=>{"use strict";n.d(t,{a:()=>s});n(66992),n(33948);var r=n(64574),a=n(47509),l=n(70330),o=n(90528),i=n(65252),c=n(67294);function s(e){const{space:t,onClose:n,onConfirm:s}=e,[m,u]=c.useState(""),d=c.useRef();c.useEffect(()=>{d.current&&d.current.focus()},[]);return c.createElement(r.g,{onClose:n,closeOnEsc:!0,closeOnOutsideClick:!0},c.createElement(a.y,{size:"small"},c.createElement(a.y.Header,null,c.createElement(a.y.Title,null,"Delete ",t.name)),c.createElement(a.y.Body,null,c.createElement(l.b.Group,{title:"Type in 'DELETE' to confirm.",styles:[o.b.MARGIN.none]},c.createElement(l.b.Input,{ref:d,value:m,onChange:e=>{e.preventDefault(),u(e.currentTarget.value)}}),c.createElement(l.b.Hint,null,"This action ",c.createElement("b",null,"CANNOT be undone"),". This will permanently delete the project, its content history and comments, and remove all integrations."))),c.createElement(a.y.Footer,null,c.createElement(i.b,{kind:"cancel",onClick:n},"Cancel"),c.createElement(i.b,{kind:"danger",onClick:s,disabled:"DELETE"!==m},"Yes, I'm sure"))))}},39694:(e,t,n)=>{"use strict";n.d(t,{b:()=>p});n(66992),n(33948);var r=n(67294),a=n(6911),l=n(65497),o=n(90528),i=n(24925),c=n(34690),s=n(91447),m=n(57155),u=n(94455),d=n(42615);function b(e){const{owner:t,space:n}=e,{createTeam:b}=(0,m.f)(),p=(0,s.EE)(),[y,g]=(0,u.a)(t,"space/invite",{spaceID:n?n.uid:null});return r.createElement(l.b,{size:"small",onClick:()=>{if(y)return void y();const e=c.b.create({name:"New Team"});b(t,e),p.push("/@"+t.baseDomain+"/teams/"+e.uid)}},r.createElement(l.b.Body,null,r.createElement(o.b,{styles:[o.b.MARGIN.S100Bottom]},r.createElement(a.b,{size:"medium"}),r.createElement(i.b.UIH300,{styles:[o.b.MARGIN.S100Left]},"Create a team"),g&&r.createElement(d.z,{styles:[o.b.MARGIN.S200Left],method:g})),r.createElement(o.b,null,r.createElement(i.b.TextH200,{styles:[i.b.COLOR.greyBase]},"Create a new team to setup different access controls. A team can be added or removed from each space."))))}b.defaultProps={space:null};const p=b},42615:(e,t,n)=>{"use strict";var r=n(67294),a=n.n(r),l=n(23674);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const i=function(e){return a().createElement(l.b,o({},{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",shapeRendering:"geometricprecision",stroke:"none",fill:"currentColor"},e),a().createElement("g",null,a().createElement("path",{fillRule:"evenodd",d:"M4.194 7.86L1.85 7.066a.527.527 0 0 1 0-1l2.344-.793a.527.527 0 0 0 .33-.33l.794-2.345a.527.527 0 0 1 1 0l.793 2.345a.527.527 0 0 0 .33.33l2.345.794a.527.527 0 0 1 0 .999l-2.344.794a.527.527 0 0 0-.33.33l-.795 2.344a.527.527 0 0 1-.999 0L4.525 8.19a.527.527 0 0 0-.33-.33zm4.742-4.831L7.94 2.69a.252.252 0 0 1 0-.476l.996-.338a.252.252 0 0 0 .157-.157l.338-.996a.252.252 0 0 1 .476 0l.338.996a.252.252 0 0 0 .157.157l.996.338a.252.252 0 0 1 0 .476l-.996.338a.252.252 0 0 0-.157.157l-.338.996a.252.252 0 0 1-.476 0l-.338-.996a.252.252 0 0 0-.157-.157zm-7.532 7.39l-.523-.177a.231.231 0 0 1 0-.438l.523-.177a.264.264 0 0 0 .165-.165l.177-.523a.231.231 0 0 1 .438 0l.177.523a.264.264 0 0 0 .165.165l.523.177a.231.231 0 0 1 0 .438l-.523.177a.264.264 0 0 0-.165.165l-.177.523a.231.231 0 0 1-.438 0l-.177-.523a.264.264 0 0 0-.165-.165z"})))};var c=n(80822),s=n(95993),m=n(49027),u=n(87609),d=n(27433),b=n(90528),p=n(24925),y=n(41413);n.d(t,{z:()=>E});const g=y.StyleSheet.create({upgradeLabel:{display:"inline-flex",alignItems:"center",paddingLeft:c.b.S100,paddingRight:c.b.S100,borderRadius:s.b.RADIUS_SMALL,background:m.b.ORANGE_LIGHT,color:m.b.WHITE},upgradeLabelClickable:{cursor:"pointer",transition:u.b.fastEaseOut("background"),":hover":{background:m.b.ORANGE_BASE}},upgradeIcon:{lineHeight:"1em",marginRight:c.b.S100/2}});function E(e){const{onClick:t,styles:n}=e;return d.wr.useIsLoading()?null:r.createElement(b.b,{component:"span",styles:[g.upgradeLabel,t&&g.upgradeLabelClickable,n],onClick:t},r.createElement(b.b,{styles:[g.upgradeIcon]},r.createElement(i,{size:"small"}))," ",r.createElement(b.b,null,r.createElement(p.b.UIH200,null,"Upgrade")))}},94455:(e,t,n)=>{"use strict";n.d(t,{a:()=>i});n(32023);var r=n(99747),a=n(69481),l=n(68413),o=n(30994);function i(e,t,n){void 0===n&&(n={});const i=(0,r.v)(),{usage:c}=(0,a.f)({usage:l.b.queryByID(e.uid)}),{createOrgFlow:s,upgrade:m}=(0,o.a)();if(!c.value)return[null,null];const u=e.isUser()?function(e,t){switch(t){case"space/new":return e.canCreateSpace?null:"upgrade/create/org";case"space/new/public":case"space/visibility/public":return e.hasReachedPublicSpacesLimits?"upgrade/create/org":null;case"space/new/private":case"space/visibility/private":return e.hasReachedPrivateSpacesLimits?"upgrade/create/org":null;default:return"upgrade/create/org"}}(e,t):function(e,t,n,r){const a=t.product&&[n.stripe.products.business,n.stripe.products.enterprise].includes(t.product),l=e.ssoSignInLabel||e.isNonProfit||e.isEnterprise||a;switch(r){case"space/new":return e.canCreateSpace?null:"upgrade/startup";case"space/new/public":case"space/visibility/public":return e.hasReachedPublicSpacesLimits?"upgrade/startup":null;case"space/new/private":case"space/visibility/private":return e.hasReachedPrivateSpacesLimits?"upgrade/startup":null;case"feature/shareable-link":case"feature/customization":return e.hasReachedPrivateSpacesLimits?"upgrade/startup":null;case"team/invite":return e.hasReachedMembersLimits?"upgrade/startup":null;case"feature/sso":return l?null:"upgrade/enterprise";default:return null}}(e,c.value,i,t);switch(u){case"upgrade/create/org":return[()=>s({reason:t,spaceID:n.spaceID}),u];case"upgrade/startup":return[()=>m({planID:"startup",reason:t,orgID:e.uid}),u];default:return[null,u]}}},47984:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});var r=n(67294),a=n.n(r),l=n(23674);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const i=function(e){return a().createElement(l.b,o({},{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor",fill:"none"},e),a().createElement("g",null,a().createElement("path",{d:"M4 11a9 9 0 0 1 9 9M4 4a16 16 0 0 1 16 16"}),a().createElement("circle",{cx:"5",cy:"19",r:"1"})))}},9780:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});var r=n(67294),a=n.n(r),l=n(23674);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const i=function(e){return a().createElement(l.b,o({},{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",stroke:"none",fill:"currentColor"},e),a().createElement("g",null,a().createElement("path",{d:"M3 11c0-.6.4-1 1-1 1 0 2 .1 2.9.4.5.2.8.7.7 1.2-.1.4-.5.7-1 .7h-.3c-.7-.2-1.5-.3-2.3-.3-.6 0-1-.4-1-1zm1-6c2.6 0 5.1.7 7.4 2 .2.1.3.1.5.1.3 0 .7-.2.9-.5.3-.5.1-1.1-.4-1.4C9.8 3.8 6.9 3 4 3c-.6 0-1 .4-1 1s.4 1 1 1zM23.7.3c-.4-.4-1-.4-1.4 0L14.6 8l-4.9 4.9L5.6 17H5c-1.1 0-2 .9-2 2 0 .2 0 .3.1.5L.3 22.3c-.4.4-.4 1 0 1.4.2.2.4.3.7.3s.5-.1.7-.3l2.8-2.8c.2.1.3.1.5.1 1.1 0 2-.9 2-2 0-.2 0-.3-.1-.5l3.4-3.4c1.1 1.4 1.7 3.1 1.7 4.9 0 .6.4 1 1 1s1-.4 1-1c0-2.3-.8-4.5-2.3-6.3l3.5-3.5c2.4 2.7 3.7 6.2 3.7 9.9 0 .6.4 1 1 1s1-.4 1-1c0-4.2-1.5-8.2-4.3-11.3l7-7c.5-.5.5-1.1.1-1.5z"})))}},54457:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});var r=n(67294),a=n.n(r),l=n(23674);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const i=function(e){return a().createElement(l.b,o({},{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor",fill:"none"},e),a().createElement("g",null,a().createElement("circle",{cx:"12",cy:"12",r:"10"}),a().createElement("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),a().createElement("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})))}},99374:(e,t,n)=>{e.exports=n.p+"images/e53fd54d58d7ddf2bd0ab218b78bacc5.svg"},92839:(e,t,n)=>{e.exports=n.p+"images/d4208aa9d17a920c560934d8de93e5bb.svg"},81810:(e,t,n)=>{e.exports=n.p+"images/73188aba462371bfa26eab516a719e24.svg"},63553:(e,t,n)=>{e.exports=n.p+"images/0ac833bcc5ad18acd6eb0e26d1097757.png"},9579:(e,t,n)=>{e.exports=n.p+"images/4d1768e4d31c2a46587d66a553fe4535.png"},55136:(e,t,n)=>{e.exports=n.p+"images/082328c16433ab1a32c11487bdaa9872.png"},39076:(e,t,n)=>{e.exports=n.p+"images/5e1c8e05f01e01c3e0c0330e42374c10.png"}}]);